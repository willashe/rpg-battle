(this["webpackJsonprpg-battle"]=this["webpackJsonprpg-battle"]||[]).push([[0],{27:function(e,t,n){},39:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"SET_PIXEL_MULTIPLIER",(function(){return pe})),n.d(i,"START_NEW_GAME",(function(){return Oe})),n.d(i,"START_NEW_ROUND",(function(){return fe})),n.d(i,"WIN_GAME",(function(){return xe})),n.d(i,"LOSE_GAME",(function(){return he})),n.d(i,"SET_QUEUE_INDEX",(function(){return ge})),n.d(i,"INCREMENT_QUEUE_INDEX",(function(){return me})),n.d(i,"SET_GAME_STATE",(function(){return Ee})),n.d(i,"SET_PLAYER_INTERRUPT",(function(){return ve})),n.d(i,"QUEUE_ACTION",(function(){return ye})),n.d(i,"SET_GROUP_MESSAGE",(function(){return Te})),n.d(i,"SET_ENTITY_STATUS",(function(){return Ie})),n.d(i,"SET_ENTITY_ANIMATION",(function(){return Ae})),n.d(i,"UPDATE_ENTITY_HP",(function(){return we})),n.d(i,"UPDATE_ENTITY_TP",(function(){return ke})),n.d(i,"REMOVE_ENTITY_ITEM",(function(){return Ne}));var r={};n.r(r),n.d(r,"setPixelMultiplier",(function(){return Se})),n.d(r,"startNewGame",(function(){return Me})),n.d(r,"startNewRound",(function(){return _e})),n.d(r,"winGame",(function(){return Re})),n.d(r,"loseGame",(function(){return Pe})),n.d(r,"setQueueIndex",(function(){return Ge})),n.d(r,"incrementQueueIndex",(function(){return Le})),n.d(r,"setGameState",(function(){return He})),n.d(r,"setPlayerInterrupt",(function(){return Ce})),n.d(r,"queueAction",(function(){return Ue})),n.d(r,"setGroupMessage",(function(){return De})),n.d(r,"setEntityStatus",(function(){return Ye})),n.d(r,"setEntityAnimation",(function(){return qe})),n.d(r,"updateEntityHP",(function(){return Fe})),n.d(r,"updateEntityTP",(function(){return Be})),n.d(r,"removeEntityItem",(function(){return ze}));var a={};n.r(a),n.d(a,"newGameThunk",(function(){return Jt})),n.d(a,"attackThunk",(function(){return $t})),n.d(a,"techThunk",(function(){return en})),n.d(a,"itemThunk",(function(){return tn})),n.d(a,"postExecutionThunk",(function(){return nn}));var c,o=n(2),s=n.n(o),u=n(28),l=n.n(u),b=(n(27),n(5)),d=n(6),j={IDLE:600,SLASH:600,SHOOT:1e3,USE:1e3,TARGETED:600,HURT:1e3,DYING:150};!function(e){e.INIT="INIT",e.NEW_GAME="NEW_GAME",e.GAME_WON="GAME_WON",e.GAME_LOST="GAME_LOST",e.PLAYER_INPUT="PLAYER_INPUT",e.EXECUTING="EXECUTING",e.POST_EXECUTION="POST_EXECUTION"}(c||(c={}));var p,O=c.INIT,f=c.NEW_GAME,x=c.GAME_WON,h=c.GAME_LOST,g=c.PLAYER_INPUT,m=c.EXECUTING,E=c.POST_EXECUTION;!function(e){e.PLAYER_GROUP="PLAYER_GROUP",e.LEFT_ENEMY_GROUP="LEFT_ENEMY_GROUP",e.RIGHT_ENEMY_GROUP="RIGHT_ENEMY_GROUP"}(p||(p={}));var v,y=p.PLAYER_GROUP,T=p.LEFT_ENEMY_GROUP,I=p.RIGHT_ENEMY_GROUP;!function(e){e.HUMAN="HUMAN",e.NUMAN="NUMAN",e.MONSTER="MONSTER",e.ROBOT="ROBOT"}(v||(v={}));var A,w=v.HUMAN,k=v.NUMAN,N=v.MONSTER;v.ROBOT;!function(e){e.OK="OK",e.DEAD="DEAD",e.PARALYZED="PARALYZED",e.POISONED="POISONED"}(A||(A={}));var S,M=A.OK,_=A.DEAD;A.PARALYZED,A.POISONED;!function(e){e.ATTACK="ATTACK",e.TECH="TECH",e.ITEM="ITEM",e.DEFEND="DEFEND"}(S||(S={}));var R,P=S.ATTACK,G=S.TECH,L=S.ITEM,H=S.DEFEND;!function(e){e.IDLE="IDLE",e.SLASH="SLASH",e.SHOOT="SHOOT",e.USE="USE",e.TARGETED="TARGETED",e.HURT="HURT",e.DYING="DYING"}(R||(R={}));var C,U=R.IDLE,D=R.SLASH,Y=R.SHOOT,q=R.USE,F=R.TARGETED,B=R.HURT,z=R.DYING;!function(e){e.ROLF="ROLF",e.RUDO="RUDO",e.NEI="NEI",e.AMY="AMY"}(C||(C={}));var W,X=C.ROLF,Q=C.RUDO,K=C.NEI,Z=C.AMY;!function(e){e.FROGGY="FROGGY",e.WRESTLER="WRESTLER",e.DARKFORCE="DARKFORCE"}(W||(W={}));var V,J=W.FROGGY,$=W.WRESTLER,ee=W.DARKFORCE;!function(e){e.ENTITY="ENTITY",e.GROUP="GROUP",e.ALL="ALL"}(V||(V={}));var te,ne=V.ENTITY,ie=V.GROUP,re=V.ALL;!function(e){e.HEAD="HEAD",e.BODY="BODY",e.LEGS="LEGS"}(te||(te={}));var ae,ce=te.HEAD;te.BODY,te.LEGS;!function(e){e.DAMAGE="DAMAGE",e.HEAL="HEAL",e.POISON="POISON",e.PARALYZE="PARALYZE",e.SLEEP="SLEEP"}(ae||(ae={}));var oe=ae.DAMAGE,se=ae.HEAL,ue=ae.POISON,le=ae.PARALYZE,be=ae.SLEEP,de=n(7),je=n(1),pe="SET_PIXEL_MULTIPLIER",Oe="START_NEW_GAME",fe="START_NEW_ROUND",xe="WIN_GAME",he="LOSE_GAME",ge="SET_QUEUE_INDEX",me="INCREMENT_QUEUE_INDEX",Ee="SET_GAME_STATE",ve="SET_PLAYER_INTERRUPT",ye="QUEUE_ACTION",Te="SET_GROUP_MESSAGE",Ie="SET_ENTITY_STATUS",Ae="SET_ENTITY_ANIMATION",we="UPDATE_ENTITY_HP",ke="UPDATE_ENTITY_TP",Ne="REMOVE_ENTITY_ITEM",Se=function(e){return{type:pe,payload:e}},Me=function(e){return{type:Oe,payload:e}},_e=function(e){return{type:fe,payload:e}},Re=function(){return{type:xe}},Pe=function(){return{type:he}},Ge=function(e){return{type:ge,payload:e}},Le=function(){return{type:me}},He=function(e){return{type:Ee,payload:e}},Ce=function(e){return{type:ve,payload:e}},Ue=function(e){var t=e.heroIndex,n=e.target,i=e.type,r=e.techIndex,a=e.itemIndex;return{type:ye,payload:{heroIndex:t,target:n,type:i,techIndex:r,itemIndex:a}}},De=function(e){var t=e.target,n=e.message;return{type:Te,payload:{target:t,message:n}}},Ye=function(e,t){return{type:Ie,payload:{target:e,status:t}}},qe=function(e,t){return{type:Ae,payload:{target:e,animation:t}}},Fe=function(e,t){return{type:we,payload:{target:e,offset:t}}},Be=function(e,t){return{type:ke,payload:{target:e,offset:t}}},ze=function(e,t){return{type:Ne,payload:{target:e,itemIndex:t}}},We=n(21),Xe=n(14),Qe=n.n(Xe),Ke=n(17),Ze=function(e){var t;return t={},Object(d.a)(t,U,{frames:e?[0,1]:0,duration:e?600:0,top:e?0:void 0,bottom:e?void 0:0}),Object(d.a)(t,D,{frames:e?[2,3]:[3,3,4,5,6,6],duration:600,top:e?0:"20%",bottom:e?void 0:0}),Object(d.a)(t,Y,{frames:[0,2,2],duration:1e3,top:e?0:void 0,bottom:e?void 0:0}),Object(d.a)(t,q,{frames:[0,1,1,1,1,1,1,1,1],duration:2e3,top:e?0:void 0,bottom:e?void 0:0}),Object(d.a)(t,F,{frames:e?[0,1]:0,duration:e?600:0,top:e?0:void 0,bottom:e?void 0:0}),Object(d.a)(t,B,{frames:[0,-1,0,-1,0,-1,0],duration:1e3,top:e?0:void 0,bottom:e?void 0:0}),Object(d.a)(t,z,{frames:0,duration:150,top:e?0:void 0,bottom:e?void 0:0}),t},Ve=function(e,t){var n=e.speed,i=t.speed;return n===i?Math.random()>.5?1:-1:n>i?-1:1},Je=function(e){return Object(de.a)(e).sort(Ve).map((function(e){var t=e.index,n=e.group,i=e.queuedAction,r=e.leftPosition;return[{type:i.type,actor:{group:n,index:t,leftPosition:r},target:i.target,techIndex:i.techIndex,itemIndex:i.itemIndex}]})).reduce((function(e,t){return[].concat(Object(de.a)(e),Object(de.a)(t))}),[])},$e=function(e,t,n,i){if(Array.isArray(n))n.filter((function(t){return-1!==e[t].entities.findIndex((function(e){return e.hp>0}))}));else if(void 0===i)n!==y&&-1===e[n].entities.findIndex((function(e){return e.hp>0}))&&(n=n===T?I:T);else{var r=e[n].entities.filter((function(e){return e.hp>0}));t===y&&0===r.length&&(r=e[n=n===T?I:T].entities.filter((function(e){return e.hp>0}))),i=r[Math.floor(Math.random()*r.length)].index}return{group:n,index:i}},et=function(e,t,n){return void 0===n||Array.isArray(t)?Array.isArray(t)?"50%":String((Number(e[t].entities[0].leftPosition.replace("%",""))+Number(e[t].entities[e[t].entities.length-1].leftPosition.replace("%","")))/2)+"%":e[t].entities[n].leftPosition};function tt(e){return new Promise((function(t){return setTimeout(t,e)}))}var nt,it,rt,at,ct,ot,st,ut,lt,bt,dt,jt,pt,Ot,ft,xt,ht,gt,mt,Et,vt,yt,Tt,It,At,wt,kt,Nt,St,Mt,_t,Rt,Pt,Gt,Lt,Ht,Ct,Ut,Dt,Yt,qt,Ft,Bt,zt,Wt,Xt,Qt,Kt,Zt,Vt,Jt=function(){return function(){var e=Object(Ke.a)(Qe.a.mark((function e(t){return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(3e3);case 2:t(He(m));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},$t=function(e,t){return function(){var n=Object(Ke.a)(Qe.a.mark((function n(i,r){var a,c,o,s,u,l,b,d,p,O,f,x,h,g,m,v,T;return Qe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=r(),c=a.groups,o=e.group,s=e.index,u=c[o].entities[s],l=u.equipment,b=l.leftHand,d=l.rightHand,p=t.group,O=t.index,f=$e(c,o,p,O),x=f.group,h=f.index,g=b&&"twoHanded"in b&&b.twoHanded||b&&"attackType"in b?b.attackType:d&&"attackType"in d?d.attackType:D,m=et(c,x,h),i(qe(e,{type:g,left:m})),i(qe(f,{type:F,left:x===y&&void 0!==h?u.leftPosition:void 0})),n.next=13,tt(j[g]);case 13:if(i(qe(e,U)),v=Math.floor(5*Math.random()),T=!1,Math.random()>.85&&(T=!0),!(v>0)){n.next=29;break}return T&&i(De({target:{group:y},message:"terrific blow!!!"})),o===y&&i(De({target:f,message:v})),i(qe(f,{type:B,left:f.group===y&&void 0!==h?u.leftPosition:void 0})),n.next=23,tt(j[B]);case 23:o===y&&i(De({target:f,message:""})),i(Fe(f,T?2*-v:-v)),T&&i(De({target:{group:y},message:""})),i(qe(f,{type:U,left:-1})),n.next=34;break;case 29:return o===y&&i(De({target:f,message:"miss"})),n.next=32,tt(1e3);case 32:o===y&&i(De({target:f,message:""})),i(qe(f,U));case 34:i(He(E));case 35:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},en=function(e,t,n){return function(){var i=Object(Ke.a)(Qe.a.mark((function i(r,a){var c,o,s,u,l,b,d,p,O,f,x,h,g,m,v,T,I,A,w;return Qe.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return c=a(),o=c.groups,s=e.group,u=e.index,l=o[s].entities[u],b=l.techniques,d=b[n],O=(p=d||{}).name,f=p.effect,x=p.power,h=p.tp,g=t.group,m=t.index,v=f===oe?$e(o,s,g,m):t,T=v.group,I=v.index,A=et(o,T,I),w=s===T&&u===I,r(qe(e,{type:q,left:s===y&&T!==y?A:void 0})),w||r(qe(v,{type:F,left:s!==y&&void 0!==I?l.leftPosition:void 0})),i.next=15,tt(j[q]);case 15:if(!(h>l.tp)){i.next=20;break}return r(qe(e,U)),r(qe(v,U)),r(He(E)),i.abrupt("return");case 20:return r(Be(e,-h)),r(qe(e,w?{type:F,left:-1}:{type:U,left:-1})),r(De({target:{group:y},message:O})),i.next=25,tt(500);case 25:i.t0=f,i.next=i.t0===oe?28:i.t0===se?34:i.t0===ue?39:i.t0===le?40:i.t0===be?41:42;break;case 28:return T!==y&&r(De({target:v,message:x})),r(qe(v,{type:B,left:-1})),i.next=32,tt(j[B]);case 32:return r(Fe(v,-x)),i.abrupt("break",42);case 34:return T!==y&&r(De({target:v,message:x})),i.next=37,tt(1e3);case 37:return r(Fe(v,x)),i.abrupt("break",42);case 39:case 40:case 41:return i.abrupt("break",42);case 42:r(De({target:{group:y},message:""})),T!==y&&r(De({target:v,message:""})),r(qe(v,{type:U,left:-1})),r(He(E));case 46:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}()},tn=function(e,t,n){return function(){var i=Object(Ke.a)(Qe.a.mark((function i(r,a){var c,o,s,u,l,b,d,p,O,f,x,h,g,m,v,T;return Qe.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return c=a(),o=c.groups,s=e.group,u=e.index,l=o[s].entities[u],b=l.inventory,d=t.group,p=t.index,O=et(o,d,p),f=s===d&&u===p,x=b[n],g=(h=x||{}).name,m=h.itemEffect,v=h.itemPower,T=h.consumable,r(qe(e,{type:q,left:s===y&&d!==y?O:void 0})),f||r(qe(t,{type:F,left:s!==y&&void 0!==p?l.leftPosition:void 0})),i.next=13,tt(j[q]);case 13:return T&&r(ze(e,n)),r(qe(e,f?{type:F,left:-1}:{type:U,left:-1})),r(De({target:{group:y},message:g})),i.next=18,tt(500);case 18:i.t0=m,i.next=i.t0===oe?21:i.t0===se?27:i.t0===ue?32:i.t0===le?33:i.t0===be?34:35;break;case 21:return d!==y&&r(De({target:t,message:v})),r(qe(t,{type:B,left:-1})),i.next=25,tt(j[B]);case 25:return r(Fe(t,-v)),i.abrupt("break",35);case 27:return d!==y&&r(De({target:t,message:v})),i.next=30,tt(1e3);case 30:return r(Fe(t,v)),i.abrupt("break",35);case 32:case 33:case 34:return i.abrupt("break",35);case 35:r(De({target:{group:y},message:""})),d!==y&&r(De({target:t,message:""})),r(qe(t,{type:U,left:-1})),r(He(E));case 39:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}()},nn=function(){return function(){var e=Object(Ke.a)(Qe.a.mark((function e(t,n){var i,r,a,c,o,s,u,l,d,p,O,f,x,h,g,E,v,A,w,k,N,S,R,P,G,L,H,C,D;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n(),r=i.groups,a=r[y],c=r[T],o=r[I],s=0,u=0,l=0,d=Object(We.a)(a.entities.entries()),e.prev=5,d.s();case 7:if((p=d.n()).done){e.next=23;break}if(O=Object(b.a)(p.value,2),f=O[0],x=O[1],h=x.status,g=x.currentAnimation,!(x.hp>0&&h===M)){e.next=15;break}t(qe({group:y,index:f},{type:U})),s++,e.next=21;break;case 15:if(g.type===z||h===_){e.next=21;break}return t(qe({group:y,index:f},{type:z,left:-1})),e.next=19,tt(j[z]);case 19:t(Ye({group:y,index:f},_)),t(qe({group:y,index:f},U));case 21:e.next=7;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(5),d.e(e.t0);case 28:return e.prev=28,d.f(),e.finish(28);case 31:E=Object(We.a)(c.entities.entries()),e.prev=32,E.s();case 34:if((v=E.n()).done){e.next=49;break}if(A=Object(b.a)(v.value,2),w=A[0],k=A[1],N=k.status,S=k.currentAnimation,!(k.hp>0&&N===M)){e.next=41;break}u++,e.next=47;break;case 41:if(S.type===z||N===_){e.next=47;break}return t(qe({group:T,index:w},z)),e.next=45,tt(j[z]);case 45:t(Ye({group:T,index:w},_)),t(qe({group:T,index:w},U));case 47:e.next=34;break;case 49:e.next=54;break;case 51:e.prev=51,e.t1=e.catch(32),E.e(e.t1);case 54:return e.prev=54,E.f(),e.finish(54);case 57:R=Object(We.a)(o.entities.entries()),e.prev=58,R.s();case 60:if((P=R.n()).done){e.next=75;break}if(G=Object(b.a)(P.value,2),L=G[0],H=G[1],C=H.status,D=H.currentAnimation,!(H.hp>0&&C===M)){e.next=67;break}l++,e.next=73;break;case 67:if(D.type===z||C===_){e.next=73;break}return t(qe({group:I,index:L},z)),e.next=71,tt(j[z]);case 71:t(Ye({group:I,index:L},_)),t(qe({group:I,index:L},U));case 73:e.next=60;break;case 75:e.next=80;break;case 77:e.prev=77,e.t2=e.catch(58),R.e(e.t2);case 80:return e.prev=80,R.f(),e.finish(80);case 83:return e.next=85,tt(500);case 85:s?u||l?(t(Le()),t(He(m))):t(Re()):t(Pe());case 86:case"end":return e.stop()}}),e,null,[[5,25,28,31],[32,51,54,57],[58,77,80,83]])})));return function(t,n){return e.apply(this,arguments)}}()},rn=i.SET_PIXEL_MULTIPLIER,an=i.START_NEW_GAME,cn=i.START_NEW_ROUND,on=i.WIN_GAME,sn=i.LOSE_GAME,un=i.SET_QUEUE_INDEX,ln=i.INCREMENT_QUEUE_INDEX,bn=i.SET_GAME_STATE,dn=i.SET_PLAYER_INTERRUPT,jn=i.QUEUE_ACTION,pn=i.SET_GROUP_MESSAGE,On=i.SET_ENTITY_STATUS,fn=i.SET_ENTITY_ANIMATION,xn=i.UPDATE_ENTITY_HP,hn=i.UPDATE_ENTITY_TP,gn=i.REMOVE_ENTITY_ITEM,mn=function(e,t){var n=t.type,i=t.payload;switch(n){case rn:return Object(je.a)(Object(je.a)({},e),{},{pixelMultiplier:i});case an:return Object(je.a)(Object(je.a)({},e),i);case cn:return Object(je.a)(Object(je.a)({},e),{},{gameState:m,queueIndex:0,queue:i});case on:return Object(je.a)(Object(je.a)({},e),{},{gameState:x,queueIndex:null});case sn:return Object(je.a)(Object(je.a)({},e),{},{gameState:h,queueIndex:null});case un:return Object(je.a)(Object(je.a)({},e),{},{queueIndex:i});case ln:return Object(je.a)(Object(je.a)({},e),{},{queueIndex:null===e.queueIndex?0:e.queueIndex+1});case bn:return Object(je.a)(Object(je.a)({},e),{},{gameState:i});case dn:return Object(je.a)(Object(je.a)({},e),{},{playerInterrupt:i});case pn:var r=i.target.group,a=i.message,c=Object(je.a)({},e.groups);return Array.isArray(r)?r.forEach((function(e){c=Object(je.a)(Object(je.a)({},c),{},Object(d.a)({},e,Object(je.a)(Object(je.a)({},c[e]),{},{message:a})))})):c=Object(je.a)(Object(je.a)({},c),{},Object(d.a)({},r,Object(je.a)(Object(je.a)({},c[r]),{},{message:a}))),Object(je.a)(Object(je.a)({},e),{},{groups:c});case On:var o=i.target,s=o.group,u=o.index,l=i.status,b=Object(je.a)({},e.groups);if(Array.isArray(s))s.forEach((function(e){b[e]=Object(je.a)(Object(je.a)({},b[e]),{},{entities:b[e].entities.map((function(e){return Object(je.a)(Object(je.a)({},e),{},{status:l})}))})}));else if(void 0===u){var j=b[s].entities.map((function(e){return Object(je.a)(Object(je.a)({},e),{},{status:l})}));b=Object(je.a)(Object(je.a)({},b),{},Object(d.a)({},s,Object(je.a)(Object(je.a)({},b[s]),{},{entities:j})))}else{var p=Object(je.a)(Object(je.a)({},b[s].entities[u]),{},{status:l}),O=[].concat(Object(de.a)(b[s].entities.slice(0,u)),[p],Object(de.a)(b[s].entities.slice(u+1)));b=Object(je.a)(Object(je.a)({},b),{},Object(d.a)({},s,Object(je.a)(Object(je.a)({},b[s]),{},{entities:O})))}return Object(je.a)(Object(je.a)({},e),{},{groups:b});case fn:var f=i.target,g=f.group,E=f.index,v=i.animation,T=Object(je.a)({},e.groups),I="string"===typeof v?{type:v}:v;if(Array.isArray(g))g.forEach((function(e){T[e]=Object(je.a)(Object(je.a)({},T[e]),{},{entities:T[e].entities.map((function(e){return Object(je.a)(Object(je.a)({},e),{},{currentAnimation:-1===I.left?Object(je.a)(Object(je.a)({},e.currentAnimation),{},{type:I.type}):I})}))})}));else if(void 0===E){var A=T[g].entities.map((function(e){return Object(je.a)(Object(je.a)({},e),{},{currentAnimation:-1===I.left?Object(je.a)(Object(je.a)({},e.currentAnimation),{},{type:I.type}):I})}));T=Object(je.a)(Object(je.a)({},T),{},Object(d.a)({},g,Object(je.a)(Object(je.a)({},T[g]),{},{entities:A})))}else{var w=Object(je.a)(Object(je.a)({},T[g].entities[E]),{},{currentAnimation:-1===I.left?Object(je.a)(Object(je.a)({},T[g].entities[E].currentAnimation),{},{type:I.type}):I}),k=[].concat(Object(de.a)(T[g].entities.slice(0,E)),[w],Object(de.a)(T[g].entities.slice(E+1)));T=Object(je.a)(Object(je.a)({},T),{},Object(d.a)({},g,Object(je.a)(Object(je.a)({},T[g]),{},{entities:k})))}return Object(je.a)(Object(je.a)({},e),{},{groups:T});case xn:var N=i.target,S=N.group,M=N.index,_=i.offset,R=Object(je.a)({},e.groups);if(Array.isArray(S))S.forEach((function(e){R[e]=Object(je.a)(Object(je.a)({},R[e]),{},{entities:R[e].entities.map((function(e){return Object(je.a)(Object(je.a)({},e),{},{hp:Math.min(e.maxHp,e.hp+_)})}))})}));else if(void 0===M){var P=R[S].entities.map((function(e){return Object(je.a)(Object(je.a)({},e),{},{hp:Math.min(e.maxHp,e.hp+_)})}));R=Object(je.a)(Object(je.a)({},R),{},Object(d.a)({},S,Object(je.a)(Object(je.a)({},R[S]),{},{entities:P})))}else{var G=Object(je.a)(Object(je.a)({},R[S].entities[M]),{},{hp:Math.min(R[S].entities[M].maxHp,R[S].entities[M].hp+_)}),L=[].concat(Object(de.a)(R[S].entities.slice(0,M)),[G],Object(de.a)(R[S].entities.slice(M+1)));R=Object(je.a)(Object(je.a)({},R),{},Object(d.a)({},S,Object(je.a)(Object(je.a)({},R[S]),{},{entities:L})))}return Object(je.a)(Object(je.a)({},e),{},{groups:R});case hn:var H=i.target,C=H.group,U=H.index,D=i.offset,Y=Object(je.a)({},e.groups);if(Array.isArray(C))C.forEach((function(e){Y[e]=Object(je.a)(Object(je.a)({},Y[e]),{},{entities:Y[e].entities.map((function(e){return Object(je.a)(Object(je.a)({},e),{},{tp:e.tp+D})}))})}));else if(void 0===U){var q=Y[C].entities.map((function(e){return Object(je.a)(Object(je.a)({},e),{},{tp:e.tp+D})}));Y=Object(je.a)(Object(je.a)({},Y),{},Object(d.a)({},C,Object(je.a)(Object(je.a)({},Y[C]),{},{entities:q})))}else{var F=Object(je.a)(Object(je.a)({},Y[C].entities[U]),{},{tp:Y[C].entities[U].tp+D}),B=[].concat(Object(de.a)(Y[C].entities.slice(0,U)),[F],Object(de.a)(Y[C].entities.slice(U+1)));Y=Object(je.a)(Object(je.a)({},Y),{},Object(d.a)({},C,Object(je.a)(Object(je.a)({},Y[C]),{},{entities:B})))}return Object(je.a)(Object(je.a)({},e),{},{groups:Y});case jn:var z=i.heroIndex,W=i.target,X=i.type,Q=i.techIndex,K=i.itemIndex,Z=Object(je.a)(Object(je.a)({},e.groups[y].entities[z]),{},{queuedAction:{type:X,target:W,techIndex:Q,itemIndex:K}}),V=[].concat(Object(de.a)(e.groups[y].entities.slice(0,z)),[Z],Object(de.a)(e.groups[y].entities.slice(z+1)));return Object(je.a)(Object(je.a)({},e),{},{groups:Object(je.a)(Object(je.a)({},e.groups),{},Object(d.a)({},y,Object(je.a)(Object(je.a)({},e.groups[y]),{},{entities:V})))});case gn:var J=i.target,$=i.itemIndex,ee=J.group,te=J.index;if(!ee||Array.isArray(ee)||void 0===te)return e;var ne=Object(de.a)(e.groups[ee].entities[te].inventory);ne.splice($,1);var ie=Object(je.a)(Object(je.a)({},e.groups[ee].entities[te]),{},{inventory:ne}),re=[].concat(Object(de.a)(e.groups[y].entities.slice(0,te)),[ie],Object(de.a)(e.groups[y].entities.slice(te+1)));return Object(je.a)(Object(je.a)({},e),{},{groups:Object(je.a)(Object(je.a)({},e.groups),{},Object(d.a)({},y,Object(je.a)(Object(je.a)({},e.groups[y]),{},{entities:re})))});default:return e}},En=n(0),vn={pixelMultiplier:1,gameState:O,queue:[],queueIndex:null,playerInterrupt:!1,groups:(nt={},Object(d.a)(nt,y,{entities:[],message:""}),Object(d.a)(nt,T,{entities:[],message:""}),Object(d.a)(nt,I,{entities:[],message:""}),nt)},yn=Object(o.createContext)([vn,function(){return null}]),Tn=function(e){var t=e.children,n=Object(o.useReducer)(mn,vn),i=Object(b.a)(n,2),r=i[0],a=i[1],c=Object(o.useRef)(),s=Object(o.useCallback)((function(e){"function"===typeof e?e(s,(function(){return c.current})):a(e)}),[]);return c.current=r,Object(En.jsx)(yn.Provider,{value:[r,s],children:t})},In=n(3),An=n(11),wn=n(8),kn=n(4),Nn=(n(39),kn.b.div(it||(it=Object(In.a)(["\n  margin: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 100%;\n  background: url('./assets/title.png');\n  background-position: center;\n  background-size: contain;\n  background-repeat: no-repeat;\n"])))),Sn=Object(kn.b)((function(e){return Object(En.jsx)("div",Object(je.a)({},e))}))(rt||(rt=Object(In.a)(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-end;\n  aspect-ratio: 4 / 3;\n  width: 133.33vmin;\n  overflow: hidden;\n  padding: 0.5rem;\n"]))),Mn=Object(kn.b)((function(e){return Object(En.jsx)(An.b,Object(je.a)({},e))}))(at||(at=Object(In.a)(["\n  margin-bottom: 0.5rem;\n"]))),_n=function(){return Object(En.jsx)(Nn,{children:Object(En.jsxs)(Sn,{children:[Object(En.jsx)(Mn,{to:"/new-game",children:"Start"}),Object(En.jsx)(Mn,{to:"/about",children:"About"})]})})},Rn=n(52),Pn={KNIFE:{name:"KNIFE",attackPower:5,targetType:ne,attackType:"SLASH",equippableBy:[X,Q,Z]},STEEL_BAR:{name:"STEEL_BAR",attackPower:7,defensePower:2,targetType:ne,attackType:"SLASH",equippableBy:[K]},SHOTGUN:{name:"SHOTGUN",attackPower:20,targetType:ie,attackType:"SHOOT",equippableBy:[Q],twoHanded:!0}},Gn={CARBON_EMEL:{name:"CARBON_EMEL",defensePower:7,equippableBy:[Z]},CARBON_SHIELD:{name:"CARBON_SHIELD",defensePower:8,equippableBy:[X,Q]}},Ln={HEADGEAR:{name:"HEADGEAR",defensePower:3,type:ce,equippableBy:[X,Q,Z]},RIBBON:{name:"RIBBON",defensePower:3,type:ce,equippableBy:[K]}},Hn={RES:{name:"RES",targetType:ne,targetAllies:!0,effect:se,power:20,tp:3},FOI:{name:"FOI",targetType:ne,effect:oe,power:14,tp:2},GIFOI:{name:"GIFOI",targetType:ie,effect:oe,power:20,tp:5},LIGHTNING:{name:"LIGHTNING",targetType:re,effect:oe,power:100,tp:5}},Cn={MONOMATE:{name:"MONOMATE",consumable:!0,itemTargetType:ne,itemTargetAllies:!0,itemEffect:se,itemPower:10}}.MONOMATE,Un=Pn.KNIFE,Dn=Pn.STEEL_BAR,Yn=Pn.SHOTGUN,qn=Gn.CARBON_EMEL,Fn=Gn.CARBON_SHIELD,Bn=Ln.HEADGEAR,zn=Ln.RIBBON,Wn=Hn.RES,Xn=Hn.FOI,Qn=Hn.GIFOI,Kn=(ct={},Object(d.a)(ct,X,{type:w,name:X,maxHp:15,hp:15,maxTp:5,tp:5,attack:1,defense:3,speed:2,inventory:[Cn,Cn],equipment:{leftHand:Fn,rightHand:Un,head:Bn},techniques:[Wn,Xn,Qn],animations:Ze(!1),queuedAction:{type:P,target:{group:T,index:0}}}),Object(d.a)(ct,Q,{type:w,name:Q,maxHp:20,hp:20,maxTp:0,tp:0,attack:1,defense:3,speed:2,inventory:[],equipment:{leftHand:Yn,rightHand:Yn},techniques:[],animations:Ze(!1),queuedAction:{type:P,target:{group:T}}}),Object(d.a)(ct,K,{type:k,name:K,maxHp:15,hp:15,maxTp:15,tp:15,attack:1,defense:3,speed:3,inventory:[Cn,Cn,Cn],equipment:{leftHand:Dn,rightHand:Dn,head:zn},techniques:[Wn],animations:Ze(!1),queuedAction:{type:P,target:{group:T,index:0}}}),Object(d.a)(ct,Z,{type:w,name:Z,maxHp:10,hp:10,maxTp:15,tp:15,attack:1,defense:3,speed:2,inventory:[Cn,Cn],equipment:{leftHand:qn,rightHand:Un,head:Bn},techniques:[Wn],animations:Ze(!1),queuedAction:{type:P,target:{group:T,index:0}}}),ct),Zn=Hn.RES,Vn=Hn.FOI,Jn=Hn.LIGHTNING,$n=(ot={},Object(d.a)(ot,J,{type:N,name:J,maxHp:10,hp:10,maxTp:5,tp:5,attack:1,defense:3,speed:1,inventory:[],equipment:{},techniques:[],animations:Ze(!0),size:1,queuedAction:{type:P,target:{group:y,index:0}}}),Object(d.a)(ot,$,{type:N,name:$,maxHp:20,hp:20,maxTp:0,tp:0,attack:1,defense:3,speed:3,inventory:[],equipment:[],techniques:[],animations:Ze(!0),size:1,queuedAction:{type:P,target:{group:y,index:0}}}),Object(d.a)(ot,ee,{type:N,name:ee,maxHp:2560,hp:2560,maxTp:20,tp:20,attack:10,defense:10,speed:3,inventory:[],equipment:[],techniques:[Zn,Vn,Jn],animations:Ze(!0),size:4,height:120,width:320,queuedAction:{type:G,target:{group:y},techIndex:2}}),ot),ei=Object(kn.b)((function(e){return Object(En.jsx)("div",Object(je.a)({},e))}))(st||(st=Object(In.a)(["\n  background: #000080;\n  color: white;\n  position: relative;\n  padding: ","px\n    ","px\n    ","px\n    ","px;\n"])),(function(e){return 5*e.pixelMultiplier}),(function(e){return 8*e.pixelMultiplier}),(function(e){return 5*e.pixelMultiplier}),(function(e){return 8*e.pixelMultiplier})),ti=kn.b.div(ut||(ut=Object(In.a)(["\n  position: absolute;\n  background-size: cover;\n  background-repeat: none;\n"]))),ni=kn.b.div(lt||(lt=Object(In.a)(["\n  position: absolute;\n  height: 100%;\n  background-size: 100%;\n  background-repeat: repeat-y;\n"]))),ii=Object(kn.b)((function(e){return Object(En.jsx)("div",Object(je.a)({},e))}))(bt||(bt=Object(In.a)(["\n  position: absolute;\n  height: ","px;\n  width: 100%;\n  background-size: ","px 100%;\n  background-repeat: repeat-x;\n"])),(function(e){return 3*e.pixelMultiplier}),(function(e){return 5*e.pixelMultiplier})),ri=function(e){var t=e.children,n=Object(o.useContext)(yn),i=Object(b.a)(n,1)[0].pixelMultiplier;return Object(En.jsxs)(ei,Object(je.a)(Object(je.a)({},e),{},{pixelMultiplier:i,children:[t,Object(En.jsx)(ni,{style:{top:0,left:0,width:5*i,backgroundImage:"url(./assets/left.png)"}}),Object(En.jsx)(ni,{style:{top:0,right:0,width:5*i,backgroundImage:"url(./assets/right.png)"}}),Object(En.jsx)(ii,{style:{top:0,left:0,backgroundImage:"url(./assets/top.png)"},pixelMultiplier:i}),Object(En.jsx)(ii,{style:{bottom:0,left:0,backgroundImage:"url(./assets/bottom.png)"},pixelMultiplier:i}),Object(En.jsx)(ti,{style:{top:0,left:0,width:5*i,height:3*i,backgroundImage:"url(./assets/top-left-corner.png)"}}),Object(En.jsx)(ti,{style:{top:0,right:0,width:5*i,height:3*i,backgroundImage:"url(./assets/top-right-corner.png)"}}),Object(En.jsx)(ti,{style:{bottom:0,left:0,width:5*i,height:3*i,backgroundImage:"url(./assets/bottom-left-corner.png)"}}),Object(En.jsx)(ti,{style:{bottom:0,right:0,width:5*i,height:3*i,backgroundImage:"url(./assets/bottom-right-corner.png)"}})]}))},ai=r.startNewGame,ci=Object(kn.b)((function(e){return Object(En.jsx)("button",Object(je.a)({},e))}))(dt||(dt=Object(In.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: ","px;\n  border: 1px solid;\n  border-radius: 8px;\n  margin: 1rem auto;\n  cursor: pointer;\n"])),(function(e){return 8*e.pixelMultiplier})),oi=function(){var e=Object(o.useContext)(yn),t=Object(b.a)(e,1)[0].pixelMultiplier,n=Object(wn.g)(),i=Object(o.useContext)(yn),r=Object(b.a)(i,2)[1],a=Object(o.useState)([X,Q,K,Z]),c=Object(b.a)(a,2),s=c[0],u=c[1],l=Object(o.useState)(J),j=Object(b.a)(l,2),p=j[0],O=j[1],x=Object(o.useState)(3),h=Object(b.a)(x,2),g=h[0],m=h[1],E=Object(o.useState)($),v=Object(b.a)(E,2),A=v[0],w=v[1],k=Object(o.useState)(1),N=Object(b.a)(k,2),S=N[0],_=N[1],R=g+S,P=p?g*$n[p].size:0,G=A?S*$n[A].size:0,L=4-P-G;return Object(En.jsxs)(ri,{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"2rem",zIndex:10,width:"70%"},children:[Object(En.jsx)("h3",{style:{marginBottom:0},children:"Let's go!"}),"--------------",Object(En.jsx)("h4",{style:{margin:"1rem 0"},children:"Heroes: "}),Object(En.jsxs)("div",{style:{display:"flex",justifyContent:"space-evenly",textAlign:"left"},children:[Object(En.jsxs)("div",{children:[Object(En.jsx)("label",{children:"In:"}),Object(En.jsx)("br",{}),Object(En.jsx)("select",{onClick:function(e){var t=e.target.value,n=Object(de.a)(s);n.splice(s.indexOf(t),1),u(n)},size:4,style:{minWidth:100},children:s.map((function(e){return Object(En.jsx)("option",{value:e,style:{cursor:"pointer"},children:e},e.replace(" ","-"))}))})]}),Object(En.jsxs)("div",{children:[Object(En.jsx)("label",{children:"Out:"}),Object(En.jsx)("br",{}),Object(En.jsx)("select",{onClick:function(e){var t=e.target.value,n=Object(de.a)(s);n.push(t),u(n)},size:4,style:{minWidth:100},children:Object.values(C).filter((function(e){return-1===s.indexOf(e)})).map((function(e){return Object(En.jsx)("option",{value:e,style:{cursor:"pointer"},children:e},e.replace(" ","-"))}))})]})]}),"--------------",Object(En.jsx)("h4",{style:{margin:"1rem 0"},children:"Enemies: "}),Object(En.jsxs)("select",{value:p,onChange:function(e){var t=e.target.value;return O("None"===t?void 0:t)},children:[Object(En.jsx)("option",{children:"None"}),Object.values(W).filter((function(e){return e!==A})).map((function(e){return Object(En.jsx)("option",{value:e,children:e},e)}))]}),Object(En.jsx)("input",{type:"number",id:"leftEnemyCount",name:"leftEnemyCount",value:g,onChange:function(e){m(Number(e.target.value))},min:0,max:p?(4-G)/$n[p].size:4,disabled:!p}),Object(En.jsx)("br",{}),Object(En.jsxs)("select",{value:A,onChange:function(e){var t=e.target.value;return w("None"===t?void 0:t)},disabled:!p||!g||!!P&&!G&&!L,children:[Object(En.jsx)("option",{children:"None"}),Object.values(W).filter((function(e){return e!==p})).map((function(e){return Object(En.jsx)("option",{value:e,children:e},e)}))]}),Object(En.jsx)("input",{type:"number",id:"rightEnemyCount",name:"rightEnemyCount",value:S,onChange:function(e){_(Number(e.target.value))},min:0,max:A?(4-P)/$n[A].size:4,disabled:!A}),Object(En.jsx)("br",{}),"--------------",Object(En.jsx)(ci,{onClick:function(){var e,t={gameState:f,queue:[],queueIndex:null,playerInterrupt:!1,groups:(e={},Object(d.a)(e,y,{message:"",entities:s.map((function(e,t){return Object(je.a)(Object(je.a)({},Kn[e]),{},{id:Object(Rn.a)(),index:t,status:M,group:y,leftPosition:"".concat(0===t?40:1===t?60:2===t?20:80,"%"),currentAnimation:{type:U}})}))}),Object(d.a)(e,T,{type:p,message:"",entities:p&&g?Array.from(Array(g)).map((function(e,t){return Object(je.a)(Object(je.a)({},$n[p]),{},{id:Object(Rn.a)(),index:t,group:T,status:M,leftPosition:"".concat((t+1)*(100/(g+S+1)),"%"),currentAnimation:{type:U}})})):[]}),Object(d.a)(e,I,{type:A,message:"",entities:A&&S?Array.from(Array(S)).map((function(e,t){return Object(je.a)(Object(je.a)({},$n[A]),{},{id:Object(Rn.a)(),index:t,group:I,status:M,leftPosition:"".concat((g+t+1)*(100/(g+S+1)),"%"),currentAnimation:{type:U}})})):[]}),e)};r(ai(t)),n.push("/battle")},disabled:!s.length||R<=0,pixelMultiplier:t,children:"Start"}),Object(En.jsx)(An.b,{to:"/",style:{textDecoration:"none"},children:Object(En.jsx)(ci,{pixelMultiplier:t,children:"Cancel"})})]})},si=kn.b.div(jt||(jt=Object(In.a)(["\n  width: 45%;\n  display: flex;\n  justify-content: flex-end;\n"]))),ui=Object(kn.b)(ri)(pt||(pt=Object(In.a)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-end;\n  flex: 0 0 70%;\n"]))),li=Object(kn.b)(ri)(Ot||(Ot=Object(In.a)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-end;\n  flex: 0 0 30%;\n"]))),bi=function(e){var t=e.type,n=e.message;return Object(En.jsxs)(si,{children:[Object(En.jsx)(ui,{children:t}),Object(En.jsx)(li,{children:n})]})},di=kn.b.section(ft||(ft=Object(In.a)(["\n  flex: 0 1 20%;\n  display: flex;\n  top: 0;\n  justify-content: space-between;\n"]))),ji=function(){var e=Object(o.useContext)(yn),t=Object(b.a)(e,1)[0].groups,n=t[T],i=t[I];return Object(En.jsx)(di,{children:n.type!==ee&&Object(En.jsxs)(En.Fragment,{children:[Object(En.jsx)(bi,{type:n.type,message:n.message}),Object(En.jsx)(bi,{type:i.type,message:i.message})]})})},pi=function(e){return Object(kn.c)(xt||(xt=Object(In.a)(["\n  from {\n    mask-position: 0 0px;\n  }\n  to {\n    mask-position: 0 -","px;\n  }\n"])),1216*e)},Oi=Object(kn.b)((function(e){return Object(En.jsx)("div",Object(je.a)({},e))}))(ht||(ht=Object(In.a)(["\n  width: ","px;\n  mask: ",";\n  mask-size: ","px auto;\n  mask-position: 0 -","px;\n  animation: "," 3s\n    steps(20) forwards 1 ",";\n  animation-name: ",";\n"])),(function(e){return e.width*e.pixelMultiplier}),(function(e){return e.dissolving?"url(./assets/gradient-mask.png)":"none"}),(function(e){return 128*e.pixelMultiplier}),(function(e){return 1216*e.pixelMultiplier}),(function(e){var t=e.pixelMultiplier;return pi(t)}),(function(e){return e.reverse?"":" reverse"}),(function(e){var t=e.dissolving,n=e.pixelMultiplier;return t?pi(n):"none"})),fi=function(e){var t=e.dissolving,n=e.children,i=e.reverse,r=e.width,a=e.style,c=Object(o.useContext)(yn),s=Object(b.a)(c,1)[0].pixelMultiplier;return Object(En.jsx)(Oi,{dissolving:t,reverse:i,width:r,style:a,pixelMultiplier:s,children:n})},xi=kn.b.div(mt||(mt=Object(In.a)(["\n  background: url('./assets/",".png');\n  background-size: ",";\n  background-repeat: no-repeat;\n  ","\n"])),(function(e){return e.spriteImg}),(function(e){var t=e.height,n=e.pixelMultiplier;return"auto ".concat(t*n,"px")}),(function(e){var t=e.width,n=e.frames,i=e.duration,r=e.pixelMultiplier;return Array.isArray(n)?1===n.length?Object(kn.a)(vt||(vt=Object(In.a)(["\n        background-position: ","px;\n      "])),-t*r*n[0]):Object(kn.a)(yt||(yt=Object(In.a)(["\n        animation: ","\n          ","s steps(1) infinite;\n      "])),function(e,t,n){return Object(kn.c)(gt||(gt=Object(In.a)(["\n  ","\n"])),t.map((function(i,r){return"\n    ".concat((r*(100/t.length)).toFixed(2),"% {\n      background-position: ").concat(-e*n*i,"px;\n    }\n  ")})))}(t,n,r),i/1e3):Object(kn.a)(Et||(Et=Object(In.a)(["\n        background-position: ","px;\n      "])),-t*r*n)})),hi=function(e){var t=Object(o.useContext)(yn),n=Object(b.a)(t,1)[0].pixelMultiplier;return Object(En.jsx)(xi,Object(je.a)(Object(je.a)({},e),{},{pixelMultiplier:n}))},gi=kn.b.section(Tt||(Tt=Object(In.a)(["\n  position: relative;\n  flex: 0 1 100%;\n"]))),mi=kn.b.div(It||(It=Object(In.a)(["\n  position: relative;\n  width: 100%;\n  height: 55%;\n"]))),Ei=kn.b.div(At||(At=Object(In.a)([""]))),vi=Object(kn.b)(ri)(wt||(wt=Object(In.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  margin-bottom: 14px;\n"]))),yi=function(){var e=Object(o.useContext)(yn),t=Object(b.a)(e,1)[0],n=t.gameState,i=t.groups,r=t.pixelMultiplier,a=[].concat(Object(de.a)(i[T].entities),Object(de.a)(i[I].entities));return Object(En.jsxs)(gi,{children:[Object(En.jsx)(mi,{children:a.map((function(e){var t=e.id,i=e.name,a=e.status,c=e.leftPosition,o=e.currentAnimation,s=e.animations,u=e.height,l=e.width,b=o.type,d=b?s[b]:{},j=d.frames,p=void 0===j?0:j,O=d.duration,x=void 0===O?0:O;return Object(En.jsx)(fi,{dissolving:n===f,reverse:!0,width:l||64,style:{position:"absolute",bottom:0,left:c,height:(u||64)*r,width:(l||64)*r,transform:"translateX(-50%)"},children:Object(En.jsx)(hi,{height:u||64,width:l||64,spriteImg:String(i).toLowerCase(),frames:p,duration:x,style:{visibility:a===_?"hidden":void 0,height:"100%",width:"100%"}})},t)}))}),Object(En.jsx)(Ei,{children:i[y].entities.map((function(e,t){var i=e.id,a=e.name,c=e.status,o=e.leftPosition,s=e.currentAnimation,u=e.animations,l=s.type,b=s.left,d=l?u[l]:{},j=d.frames,p=void 0===j?0:j,O=d.duration,x=void 0===O?0:O,h=d.top,m=void 0===h?void 0:h,E=d.bottom,v=void 0===E?void 0:E;return Object(En.jsx)("div",{style:{position:"absolute",top:m,bottom:"".concat(v||(2===t||3===t?-24:0),"px"),left:b||o,height:64*r,width:64*r,transform:"translateX(-50%)"},children:Object(En.jsx)(hi,{height:64,width:64,spriteImg:a.toLowerCase(),frames:p,duration:x,style:{visibility:c===_||n!==f&&n!==g&&l===U?"hidden":void 0,height:"100%",width:"100%"}})},i)}))}),Boolean(i[y].message)&&Object(En.jsx)(vi,{children:i[y].message})]})},Ti=r.startNewGame,Ii=Object(kn.b)((function(e){return Object(En.jsx)("button",Object(je.a)({},e))}))(kt||(kt=Object(In.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: ","px;\n  border: 1px solid;\n  border-radius: 8px;\n  margin: 1rem auto;\n  cursor: pointer;\n"])),(function(e){return 8*e.pixelMultiplier})),Ai=function(e){var t=e.handleClose,n=Object(o.useContext)(yn),i=Object(b.a)(n,2),r=i[0],a=i[1],c=r.gameState,s=r.pixelMultiplier;return Object(En.jsxs)(ri,{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"2rem",zIndex:10},children:[Object(En.jsx)("div",{children:c===x?"You win! :)":c===h?"You lose! :(":"Had Enough?"}),"--------------",Object(En.jsx)(Ii,{pixelMultiplier:s,disabled:!0,onClick:function(){var e=Object(je.a)(Object(je.a)({},r),{},{gameState:f,queue:[],queueIndex:null,playerInterrupt:!1});a(Ti(e)),t()},children:"Replay"}),Object(En.jsx)(An.b,{to:"/new-game",style:{textDecoration:"none"},children:Object(En.jsx)(Ii,{pixelMultiplier:s,children:"New Game"})}),Object(En.jsx)(An.b,{to:"/",style:{textDecoration:"none"},children:Object(En.jsx)(Ii,{pixelMultiplier:s,children:"Quit"})}),c!==x&&c!==h?Object(En.jsxs)(En.Fragment,{children:["--------------",Object(En.jsx)(Ii,{pixelMultiplier:s,onClick:t,children:"Continue"})]}):null]})},wi=function(e){var t=e.src,n=e.alt,i=e.width,r=e.height,a=Object(o.useContext)(yn),c=Object(b.a)(a,1)[0].pixelMultiplier;return Object(En.jsx)("img",{src:t,alt:n||"",style:{width:i*c,height:r*c}})},ki=r.queueAction,Ni=Object(kn.b)(ri)(Nt||(Nt=Object(In.a)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-end;\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translate(-50%, -100%);\n  width: 16%;\n  height: 50%;\n"]))),Si=Object(kn.b)(ri)(St||(St=Object(In.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  position: absolute;\n  top: 0;\n  right: 58%;\n  transform: translateY(-100%);\n  width: 34%;\n  height: 73%;\n  padding-top: 1em;\n"]))),Mi=Object(kn.b)((function(e){return Object(En.jsx)("button",Object(je.a)({},e))}))(Mt||(Mt=Object(In.a)(["\n  width: 100%;\n  padding: 0;\n  border: none;\n  outline: none;\n  background: none;\n  color: white;\n"]))),_i=Object(kn.b)(ri)(_t||(_t=Object(In.a)(["\n  position: absolute;\n  top: 0;\n  right: 58%;\n  transform: translateY(-55%);\n  width: 25%;\n  height: 160%;\n  padding-top: 1em;\n"]))),Ri=Object(kn.b)(ri)(Rt||(Rt=Object(In.a)(["\n  position: absolute;\n  top: 0;\n  right: 58%;\n  transform: translateY(-55%);\n  width: 34%;\n  height: 160%;\n  padding-top: 1em;\n"]))),Pi=Object(kn.b)((function(e){return Object(En.jsx)(ri,Object(je.a)({},e))}))(Pt||(Pt=Object(In.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  position: absolute;\n  top: 0;\n  left: 58%;\n  transform: translateY(-100%);\n  width: 34%;\n  height: ",";\n  padding-top: 1em;\n"])),(function(e){var t=e.height;return"".concat(t)})),Gi=kn.b.ul(Gt||(Gt=Object(In.a)(["\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n"]))),Li=Object(kn.b)((function(e){return Object(En.jsx)("li",Object(je.a)({},e))}))(Lt||(Lt=Object(In.a)(["\n  margin: 0 0 0.75em;\n\n  & button {\n    text-align: left;\n    &:before {\n      content: '';\n      display: inline-block;\n      width: ",";\n      height: ",";\n      margin-right: 0.25em;\n      margin-bottom: 0.1em;\n      background: orange;\n      background: url('./assets/button-light.png');\n      background-size: ",";\n      background-repeat: no-repeat;\n      background-position: ",";\n  }\n"])),(function(e){var t=e.pixelMultiplier;return"".concat(14*t,"px")}),(function(e){var t=e.pixelMultiplier;return"".concat(8*t,"px")}),(function(e){var t=e.pixelMultiplier;return"auto ".concat(8*t,"px")}),(function(e){var t=e.active,n=e.pixelMultiplier;return"".concat(t?-14*n:0,"px")})),Hi=function(e){var t,n=e.activeHero,i=e.handleClose,r=Object(o.useContext)(yn),a=Object(b.a)(r,2),c=a[0],s=a[1],u=c.groups,l=u[y],d=u[T],j=u[I],p=c.pixelMultiplier,O=Object(o.useState)(),f=Object(b.a)(O,2),x=f[0],h=f[1],g=Object(o.useState)(),m=Object(b.a)(g,2),E=m[0],v=m[1],A=Object(o.useState)(),w=Object(b.a)(A,2),k=w[0],N=w[1],S=n.name,M=n.index,_=n.equipment,R=_.leftHand,C=_.rightHand,U=n.inventory,D=n.techniques,Y=R&&"twoHanded"in R&&R.twoHanded||R&&"targetType"in R?R.targetType:C&&"targetType"in C?C.targetType:void 0,q=void 0!==k?D[k]:void 0,F=void 0!==E?U[E]:void 0,B=x===P?Y:x===G?null===q||void 0===q?void 0:q.targetType:x===L?null===F||void 0===F?void 0:F.itemTargetType:void 0,z=x===G?null===q||void 0===q?void 0:q.targetAllies:x===L?null===F||void 0===F?void 0:F.itemTargetAllies:void 0;return Object(o.useEffect)((function(){h(void 0),N(void 0),v(void 0)}),[n]),Object(o.useEffect)((function(){var e=function(e){"Escape"===e.key&&(void 0!==k?N(void 0):void 0!==E?v(void 0):void 0!==x?h(void 0):i())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[k,E,x,i]),Object(o.useEffect)((function(){var e,t;if(x&&B&&(B===re||x===P&&!(null===j||void 0===j||null===(e=j.entities)||void 0===e?void 0:e.length)||(x===G||x===L)&&(z&&B===ie||!z&&!(null===j||void 0===j||null===(t=j.entities)||void 0===t?void 0:t.length)))){var n,r={group:z?y:B===re&&(null===j||void 0===j||null===(n=j.entities)||void 0===n?void 0:n.length)?[T,I]:T,index:B===ne?0:void 0};s(ki({heroIndex:M,target:r,type:x,techIndex:k,itemIndex:E})),i()}}),[M,x,B,z,j,i,s,E,k,U,D]),Object(En.jsxs)(En.Fragment,{children:[Object(En.jsx)(Ni,{children:S}),Object(En.jsxs)(Si,{children:[Y&&Object(En.jsx)(Mi,{onClick:function(){h(P)},children:Object(En.jsx)(wi,{src:"./assets/attack-icon.png",width:16,height:16,alt:"attack icon"})}),Object(En.jsx)(Mi,{onClick:function(){D.length&&h(G)},children:Object(En.jsx)(wi,{src:"./assets/tech-icon.png",width:16,height:16,alt:"technique icon"})}),Object(En.jsx)(Mi,{onClick:function(){U.length&&h(L)},children:Object(En.jsx)(wi,{src:"./assets/item-icon.png",width:16,height:16,alt:"item icon"})}),Object(En.jsx)(Mi,{onClick:function(){s(ki({heroIndex:M,type:H})),i()},children:Object(En.jsx)(wi,{src:"./assets/defend-icon.png",width:16,height:16,alt:"defend icon"})})]}),x===G&&Object(En.jsx)(_i,{children:Object(En.jsx)(Gi,{children:D.map((function(e,t){return Object(En.jsx)(Li,{pixelMultiplier:p,active:k===t,children:Object(En.jsx)(Mi,{onClick:function(){N(t)},children:e.name})},t)}))})}),x===L&&Object(En.jsx)(Ri,{children:Object(En.jsx)(Gi,{children:U.map((function(e,t){return Object(En.jsx)(Li,{pixelMultiplier:p,active:E===t,children:Object(En.jsx)(Mi,{onClick:function(){v(t)},children:e.name},t)},t)}))})}),!x||B!==ne&&B!==ie||z||!(null===j||void 0===j||null===(t=j.entities)||void 0===t?void 0:t.length)?x&&B===ne&&z?Object(En.jsx)(Pi,{height:"133%",children:Object(En.jsx)(Gi,{children:l.entities.map((function(e,t){return Object(En.jsx)(Li,{pixelMultiplier:p,children:Object(En.jsx)(Mi,{onClick:function(){s(ki({heroIndex:M,target:{group:y,index:t},type:x,techIndex:k,itemIndex:E})),i()},children:e.name})},t)}))})}):null:Object(En.jsx)(Pi,{height:"76%",children:Object(En.jsxs)(Gi,{children:[Object(En.jsx)(Li,{pixelMultiplier:p,children:Object(En.jsx)(Mi,{onClick:function(){s(ki({heroIndex:M,target:{group:T,index:0},type:x,techIndex:k,itemIndex:E})),i()},children:null===d||void 0===d?void 0:d.type})}),Boolean(j.entities)&&Object(En.jsx)(Li,{pixelMultiplier:p,children:Object(En.jsx)(Mi,{onClick:function(){s(ki({heroIndex:M,target:{group:I,index:0},type:x,techIndex:k,itemIndex:E})),i()},children:null===j||void 0===j?void 0:j.type})})]})})]})},Ci=Object(kn.b)(ri)(Ht||(Ht=Object(In.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  flex: 0 1 auto;\n  width: 21%;\n"]))),Ui=Object(kn.b)((function(e){return Object(En.jsx)("button",Object(je.a)({},e))}))(Ct||(Ct=Object(In.a)(["\n  background: none;\n  width: 100%;\n  height: 100%;\n  border: none;\n  color: inherit;\n  text-align: left;\n"]))),Di=function(e){var t=e.hero,n=e.index,i=e.handleSelect,r=t||{},a=r.hp,c=r.tp,o=r.name,s=r.queuedAction;return Object(En.jsx)(Ci,{style:{order:0===n?1:1===n?2:2===n?0:3},children:Boolean(t)?Object(En.jsxs)(Ui,{onClick:function(){"function"===typeof i&&i(n)},children:[Object(En.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(En.jsx)("div",{children:a<=0?Object(En.jsx)(wi,{src:"./assets/gravestone.png",width:16,height:16,alt:"grave icon"}):Object(En.jsxs)(En.Fragment,{children:["HP",Object(En.jsx)("br",{}),"TP"]})}),Object(En.jsxs)("div",{children:[a>0?a:0,Object(En.jsx)("br",{}),c]})]}),Object(En.jsxs)("div",{style:{display:"flex",alignItems:"flex-end"},children:[Object(En.jsx)(wi,{src:"./assets/".concat(String(s.type).toLowerCase(),"-icon.png"),width:16,height:16,alt:"action icon"}),o]})]}):Object(En.jsx)(wi,{src:"./assets/blank-hero-icon.png",width:32,height:32,alt:"blank hero icon"})})},Yi=r.startNewRound,qi=r.setPlayerInterrupt,Fi=kn.b.section(Ut||(Ut=Object(In.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  flex: 0 0 22%;\n  height: 22%;\n"]))),Bi=Object(kn.b)(ri)(Dt||(Dt=Object(In.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 16%;\n  order: 1;\n"]))),zi=kn.b.button(Yt||(Yt=Object(In.a)(["\n  background: none;\n  border: none;\n  outline: none;\n  padding: 0;\n  color: white;\n"]))),Wi=function(){var e=Object(o.useContext)(yn),t=Object(b.a)(e,2),n=t[0],i=t[1],r=n.gameState,a=n.queueIndex,c=n.playerInterrupt,s=n.groups,u=n.pixelMultiplier,l=Object(o.useState)(),d=Object(b.a)(l,2),j=d[0],p=d[1],v=Object(o.useState)(!1),A=Object(b.a)(v,2),w=A[0],k=A[1],N=function(e){p(j===e?void 0:e)};return Object(En.jsxs)(Fi,{children:[Array.from(Array(4)).map((function(e,t){var n=s[y].entities[t];return Object(En.jsx)(Di,{hero:n,index:t,handleSelect:r===O||r===g?N:void 0},(null===n||void 0===n?void 0:n.name)||"blank-hero-".concat(t))})),void 0!==j&&Object(En.jsx)(Hi,{activeHero:s[y].entities[j],handleClose:function(){p(void 0)}}),Object(En.jsxs)(Bi,{children:[Object(En.jsxs)(zi,{disabled:void 0!==j||null!==a||r===O||r===f||r===x||r===h,onClick:function(){var e=Je([].concat(Object(de.a)(s[y].entities),Object(de.a)(s[T].entities),Object(de.a)(s[I].entities)));i(Yi(e))},children:[Object(En.jsx)("div",{style:{height:8*u,width:14*u,margin:"0 auto"},children:Object(En.jsx)(hi,{height:8,width:14,spriteImg:"button-light",frames:null!==a||r===x||r===h?[1]:[0],style:{height:"100%",width:"100%"}})}),Object(En.jsx)("div",{children:"FGHT"})]}),Object(En.jsxs)(zi,{disabled:c||null===a||r!==m&&r!==E,onClick:function(){i(qi(!0))},children:[Object(En.jsx)("div",{style:{height:8*u,width:14*u,margin:"0 auto"},children:Object(En.jsx)(hi,{height:8,width:14,spriteImg:"button-light",frames:c||null===a||r!==m&&r!==E?[1]:[0],style:{height:"100%",width:"100%"}})}),Object(En.jsx)("div",{children:"STGY"})]}),Object(En.jsx)("button",{onClick:function(){i(qi(!0)),k(!0)},children:"Exit"})]}),(w||r===O||r===x||r===h)&&Object(En.jsx)(Ai,{handleClose:function(){k(!1)}})]})},Xi=kn.b.div(qt||(qt=Object(In.a)(["\n  margin: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n"]))),Qi=Object(kn.c)(Ft||(Ft=Object(In.a)(["\n  0% {\n    background-position: 0%;\n  }\n  50% {\n    background-position: -100%;\n  }\n"]))),Ki=Object(kn.b)((function(e){return Object(En.jsx)("div",Object(je.a)({},e))}))(Bt||(Bt=Object(In.a)(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  aspect-ratio: 4 / 3;\n  width: 133.33vmin;\n  overflow: hidden;\n  outline: 4px solid #000088;\n  background: url('./assets/battle-bg.png');\n  background-size: auto 100%;\n  ","\n"])),(function(e){if(e.bgFlash)return Object(kn.a)(zt||(zt=Object(In.a)(["\n        animation: "," 0.35s steps(1) infinite;\n      "])),Qi)})),Zi=function(){var e=Object(o.useContext)(yn),t=Object(b.a)(e,1)[0].groups[y].entities,n=Object(o.useState)(!1),i=Object(b.a)(n,2),r=i[0],a=i[1];return Object(o.useEffect)((function(){t.find((function(e){return e.currentAnimation.type===B}))?a(!0):a(!1)}),[t]),Object(En.jsx)(Xi,{children:Object(En.jsxs)(Ki,{bgFlash:r,children:[Object(En.jsx)(ji,{}),Object(En.jsx)(yi,{}),Object(En.jsx)(Wi,{})]})})},Vi=r.startNewRound,Ji=r.setQueueIndex,$i=r.incrementQueueIndex,er=r.setGameState,tr=r.setPlayerInterrupt,nr=a.postExecutionThunk,ir=a.attackThunk,rr=a.newGameThunk,ar=function(){var e=Object(wn.g)(),t=Object(o.useContext)(yn),n=Object(b.a)(t,2),i=n[0],r=n[1],a=i.gameState,c=i.groups,s=i.queue,u=i.queueIndex,l=i.playerInterrupt,d=Object(o.useRef)(u),j=Object(o.useRef)(a);return Object(o.useEffect)((function(){a===O&&e.push("/")}),[a,e]),Object(o.useEffect)((function(){if(null!==u&&u!==d.current)if(d.current=u,s[u]){var e=s[u],t=e.type,n=e.actor,i=e.target,a=e.techIndex,o=e.itemIndex,b=n.group,j=n.index,p=c[b].entities[j];if(p.hp<=0||p.status!==M)return void r($i());switch(t){case P:r(ir(n,i));break;case G:void 0!==a&&r(en(n,i,a));break;case L:void 0!==o&&r(tn(n,i,o));break;default:r($i())}}else l?(r(er(g)),r(Ji(null)),r(tr(!1))):r(Ji(0))}),[u,a,s,c,l,r]),Object(o.useEffect)((function(){if(a===f)r(rr());else if(a!==j.current){if(j.current===f)if(Math.random()>.9){var e=Je([].concat(Object(de.a)(c[T].entities),Object(de.a)(c[I].entities)));r(Vi(e)),r(tr(!0))}else r(er(g));else a===E&&r(nr());j.current=a}}),[a,c,r]),Object(En.jsx)(Zi,{})},cr=kn.b.div(Wt||(Wt=Object(In.a)(["\n  position: absolute;\n  height: 100vh;\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n"]))),or=kn.b.div(Xt||(Xt=Object(In.a)(["\n  margin: 0 auto;\n  width: 100%;\n"]))),sr=kn.b.div(Qt||(Qt=Object(In.a)(["\n  display: flex;\n  justify-content: space-evenly;\n  margin: 0 0 1em;\n"]))),ur=kn.b.a(Kt||(Kt=Object(In.a)(["\n  margin: 0 1rem 1rem;\n  display: inline-block;\n  cursor: pointer;\n"]))),lr=function(){return Object(En.jsxs)(cr,{children:[Object(En.jsx)("h1",{style:{marginBottom:0},children:"Phantasy Star 2"}),Object(En.jsx)("h2",{children:"- Battle Simulator -"}),Object(En.jsxs)(or,{children:[Object(En.jsxs)("p",{style:{maxWidth:800,margin:"2rem auto",padding:"0 1rem"},children:["Homage to the fighting system from the 1989 RPG classic"," ",Object(En.jsx)("i",{children:"Phantasy Star 2"})," for the Sega Genesis console."]}),Object(En.jsxs)(sr,{children:[Object(En.jsxs)(ri,{style:{width:"30%"},children:[Object(En.jsx)("h3",{children:"Will Ashe"}),Object(En.jsx)(ur,{href:"https://willashe.com/",target:"_blank",rel:"noopener noreferrer",children:Object(En.jsx)(wi,{src:"./assets/website-icon.png",width:16,height:16,alt:"website icon"})}),Object(En.jsx)(ur,{href:"https://github.com/willashe",target:"_blank",rel:"noopener noreferrer",children:Object(En.jsx)(wi,{src:"./assets/github-icon.png",width:16,height:16,alt:"GitHub icon"})}),Object(En.jsx)(ur,{href:"https://www.linkedin.com/in/will-ashe/",target:"_blank",rel:"noopener noreferrer",children:Object(En.jsx)(wi,{src:"./assets/linkedin-icon.png",width:16,height:16,alt:"LinkedIn icon"})})]}),Object(En.jsxs)(ri,{style:{width:"30%"},children:[Object(En.jsx)("h3",{children:"Tomas Ortiz"}),Object(En.jsx)(ur,{href:"https://github.com/tomas395",target:"_blank",rel:"noopener noreferrer",children:Object(En.jsx)(wi,{src:"./assets/github-icon.png",width:16,height:16,alt:"GitHub icon"})}),Object(En.jsx)(ur,{href:"https://www.linkedin.com/in/tomas-ortiz-15b7a5199/",target:"_blank",rel:"noopener noreferrer",children:Object(En.jsx)(wi,{src:"./assets/linkedin-icon.png",width:16,height:16,alt:"LinkedIn icon"})})]})]}),Object(En.jsx)(An.b,{to:"/",children:"Home"})]})]})},br=r.setPixelMultiplier,dr=Object(kn.b)((function(e){return Object(En.jsx)("main",Object(je.a)({},e))}))(Vt||(Vt=Object(In.a)(["\n  color: #e5e4e2;\n  text-align: center;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  flex-direction: column;\n  background: url('./assets/star-bg.png');\n  background-size: ","px\n    ","px;\n  background-repeat: repeat;\n  font-size: ","px;\n  animation: "," 60s\n    linear infinite;\n  animation-fill-mode: forwards;\n"])),(function(e){return 320*e.pixelMultiplier}),(function(e){return 240*e.pixelMultiplier}),(function(e){return 8*e.pixelMultiplier}),(function(e){return function(e){return Object(kn.c)(Zt||(Zt=Object(In.a)(["\n  0% {\n    background-position: 0px;\n  }\n  100% {\n    background-position: ","px;\n  }\n"])),320*e)}(e.pixelMultiplier)}));function jr(){var e=Object(o.useContext)(yn),t=Object(b.a)(e,2),n=t[0],i=t[1],r=n.pixelMultiplier;return Object(o.useEffect)((function(){var e=function(){var e=window.innerWidth/window.innerHeight>=4/3?window.innerHeight/240:window.innerWidth/320;i(br(e))};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[i]),Object(En.jsx)(An.a,{children:Object(En.jsx)(dr,{pixelMultiplier:r,children:Object(En.jsxs)(wn.d,{children:[Object(En.jsx)(wn.b,{exact:!0,path:"/",component:_n}),Object(En.jsx)(wn.b,{exact:!0,path:"/new-game",component:oi}),Object(En.jsx)(wn.b,{exact:!0,path:"/battle",component:ar}),Object(En.jsx)(wn.b,{exact:!0,path:"/about",component:lr}),Object(En.jsx)(wn.a,{to:"/"})]})})})}var pr=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,53)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),a(e),c(e)}))};l.a.render(Object(En.jsx)(s.a.StrictMode,{children:Object(En.jsx)(Tn,{children:Object(En.jsx)(jr,{})})}),document.getElementById("root")),pr()}},[[50,1,2]]]);
//# sourceMappingURL=main.3f8b649e.chunk.js.map