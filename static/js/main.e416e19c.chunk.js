(this["webpackJsonprpg-battle"]=this["webpackJsonprpg-battle"]||[]).push([[0],{27:function(e,t,n){},39:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"SET_PIXEL_MULTIPLIER",(function(){return pe})),n.d(i,"START_NEW_GAME",(function(){return Oe})),n.d(i,"START_NEW_ROUND",(function(){return fe})),n.d(i,"WIN_GAME",(function(){return xe})),n.d(i,"LOSE_GAME",(function(){return he})),n.d(i,"SET_QUEUE_INDEX",(function(){return ge})),n.d(i,"INCREMENT_QUEUE_INDEX",(function(){return me})),n.d(i,"SET_GAME_STATE",(function(){return Ee})),n.d(i,"SET_PLAYER_INTERRUPT",(function(){return ve})),n.d(i,"QUEUE_ACTION",(function(){return ye})),n.d(i,"SET_GROUP_MESSAGE",(function(){return Te})),n.d(i,"SET_ENTITY_STATUS",(function(){return Ie})),n.d(i,"SET_ENTITY_ANIMATION",(function(){return Ae})),n.d(i,"UPDATE_ENTITY_HP",(function(){return we})),n.d(i,"UPDATE_ENTITY_TP",(function(){return ke})),n.d(i,"REMOVE_ENTITY_ITEM",(function(){return Ne}));var r={};n.r(r),n.d(r,"setPixelMultiplier",(function(){return Se})),n.d(r,"startNewGame",(function(){return Me})),n.d(r,"startNewRound",(function(){return _e})),n.d(r,"winGame",(function(){return Re})),n.d(r,"loseGame",(function(){return Pe})),n.d(r,"setQueueIndex",(function(){return Ge})),n.d(r,"incrementQueueIndex",(function(){return Le})),n.d(r,"setGameState",(function(){return He})),n.d(r,"setPlayerInterrupt",(function(){return Ce})),n.d(r,"queueAction",(function(){return Ue})),n.d(r,"setGroupMessage",(function(){return De})),n.d(r,"setEntityStatus",(function(){return Ye})),n.d(r,"setEntityAnimation",(function(){return qe})),n.d(r,"updateEntityHP",(function(){return Fe})),n.d(r,"updateEntityTP",(function(){return Be})),n.d(r,"removeEntityItem",(function(){return ze}));var a={};n.r(a),n.d(a,"newGameThunk",(function(){return Kt})),n.d(a,"attackThunk",(function(){return Zt})),n.d(a,"techThunk",(function(){return Vt})),n.d(a,"itemThunk",(function(){return Jt})),n.d(a,"postExecutionThunk",(function(){return $t}));var c,o=n(2),s=n.n(o),u=n(28),b=n.n(u),l=(n(27),n(5)),d=n(6),j={IDLE:600,SLASH:600,SHOOT:1e3,USE:1e3,TARGETED:600,HURT:1e3,DYING:150};!function(e){e.INIT="INIT",e.NEW_GAME="NEW_GAME",e.GAME_WON="GAME_WON",e.GAME_LOST="GAME_LOST",e.PLAYER_INPUT="PLAYER_INPUT",e.EXECUTING="EXECUTING",e.POST_EXECUTION="POST_EXECUTION"}(c||(c={}));var p,O=c.INIT,f=c.NEW_GAME,x=c.GAME_WON,h=c.GAME_LOST,g=c.PLAYER_INPUT,m=c.EXECUTING,E=c.POST_EXECUTION;!function(e){e.PLAYER_GROUP="PLAYER_GROUP",e.LEFT_ENEMY_GROUP="LEFT_ENEMY_GROUP",e.RIGHT_ENEMY_GROUP="RIGHT_ENEMY_GROUP"}(p||(p={}));var v,y=p.PLAYER_GROUP,T=p.LEFT_ENEMY_GROUP,I=p.RIGHT_ENEMY_GROUP;!function(e){e.HUMAN="HUMAN",e.NUMAN="NUMAN",e.MONSTER="MONSTER",e.ROBOT="ROBOT"}(v||(v={}));var A,w=v.HUMAN,k=v.NUMAN,N=v.MONSTER;v.ROBOT;!function(e){e.OK="OK",e.DEAD="DEAD",e.PARALYZED="PARALYZED",e.POISONED="POISONED"}(A||(A={}));var S,M=A.OK,_=A.DEAD;A.PARALYZED,A.POISONED;!function(e){e.ATTACK="ATTACK",e.TECH="TECH",e.ITEM="ITEM",e.DEFEND="DEFEND"}(S||(S={}));var R,P=S.ATTACK,G=S.TECH,L=S.ITEM,H=S.DEFEND;!function(e){e.IDLE="IDLE",e.SLASH="SLASH",e.SHOOT="SHOOT",e.USE="USE",e.TARGETED="TARGETED",e.HURT="HURT",e.DYING="DYING"}(R||(R={}));var C,U=R.IDLE,D=R.SLASH,Y=R.SHOOT,q=R.USE,F=R.TARGETED,B=R.HURT,z=R.DYING;!function(e){e.ROLF="ROLF",e.RUDO="RUDO",e.NEI="NEI",e.AMY="AMY"}(C||(C={}));var W,X=C.ROLF,Q=C.RUDO,K=C.NEI,Z=C.AMY;!function(e){e.FROGGY="FROGGY",e.WRESTLER="WRESTLER",e.DARKFORCE="DARKFORCE"}(W||(W={}));var V,J=W.FROGGY,$=W.WRESTLER,ee=W.DARKFORCE;!function(e){e.ENTITY="ENTITY",e.GROUP="GROUP",e.ALL="ALL"}(V||(V={}));var te,ne=V.ENTITY,ie=V.GROUP,re=V.ALL;!function(e){e.HEAD="HEAD",e.BODY="BODY",e.LEGS="LEGS"}(te||(te={}));var ae,ce=te.HEAD;te.BODY,te.LEGS;!function(e){e.DAMAGE="DAMAGE",e.HEAL="HEAL",e.POISON="POISON",e.PARALYZE="PARALYZE",e.SLEEP="SLEEP"}(ae||(ae={}));var oe=ae.DAMAGE,se=ae.HEAL,ue=ae.POISON,be=ae.PARALYZE,le=ae.SLEEP,de=n(7),je=n(1),pe="SET_PIXEL_MULTIPLIER",Oe="START_NEW_GAME",fe="START_NEW_ROUND",xe="WIN_GAME",he="LOSE_GAME",ge="SET_QUEUE_INDEX",me="INCREMENT_QUEUE_INDEX",Ee="SET_GAME_STATE",ve="SET_PLAYER_INTERRUPT",ye="QUEUE_ACTION",Te="SET_GROUP_MESSAGE",Ie="SET_ENTITY_STATUS",Ae="SET_ENTITY_ANIMATION",we="UPDATE_ENTITY_HP",ke="UPDATE_ENTITY_TP",Ne="REMOVE_ENTITY_ITEM",Se=function(e){return{type:pe,payload:e}},Me=function(e){return{type:Oe,payload:e}},_e=function(e){return{type:fe,payload:e}},Re=function(){return{type:xe}},Pe=function(){return{type:he}},Ge=function(e){return{type:ge,payload:e}},Le=function(){return{type:me}},He=function(e){return{type:Ee,payload:e}},Ce=function(e){return{type:ve,payload:e}},Ue=function(e){var t=e.heroIndex,n=e.target,i=e.type,r=e.techIndex,a=e.itemIndex;return{type:ye,payload:{heroIndex:t,target:n,type:i,techIndex:r,itemIndex:a}}},De=function(e){var t=e.target,n=e.message;return{type:Te,payload:{target:t,message:n}}},Ye=function(e,t){return{type:Ie,payload:{target:e,status:t}}},qe=function(e,t){return{type:Ae,payload:{target:e,animation:t}}},Fe=function(e,t){return{type:we,payload:{target:e,offset:t}}},Be=function(e,t){return{type:ke,payload:{target:e,offset:t}}},ze=function(e,t){return{type:Ne,payload:{target:e,itemIndex:t}}},We=n(21),Xe=n(14),Qe=n.n(Xe),Ke=n(17),Ze=function(e){var t;return t={},Object(d.a)(t,U,{frames:e?[0,1]:0,duration:e?600:0,top:e?0:void 0,bottom:e?void 0:0}),Object(d.a)(t,D,{frames:e?[2,3]:[3,3,4,5,6,6],duration:600,top:e?0:"20%",bottom:e?void 0:0}),Object(d.a)(t,Y,{frames:[0,2,2],duration:1e3,top:e?0:void 0,bottom:e?void 0:0}),Object(d.a)(t,q,{frames:[0,1,1,1,1,1,1,1,1],duration:2e3,top:e?0:void 0,bottom:e?void 0:0}),Object(d.a)(t,F,{frames:e?[0,1]:0,duration:e?600:0,top:e?0:void 0,bottom:e?void 0:0}),Object(d.a)(t,B,{frames:[0,-1,0,-1,0,-1,0],duration:1e3,top:e?0:void 0,bottom:e?void 0:0}),Object(d.a)(t,z,{frames:0,duration:150,top:e?0:void 0,bottom:e?void 0:0}),t},Ve=function(e,t){var n=e.speed,i=t.speed;return n===i?Math.random()>.5?1:-1:n>i?-1:1},Je=function(e){return Object(de.a)(e).sort(Ve).map((function(e){var t=e.index,n=e.group,i=e.queuedAction,r=e.leftPosition;return[{type:i.type,actor:{group:n,index:t,leftPosition:r},target:i.target,techIndex:i.techIndex,itemIndex:i.itemIndex}]})).reduce((function(e,t){return[].concat(Object(de.a)(e),Object(de.a)(t))}),[])},$e=function(e,t,n,i){if(Array.isArray(n))n.filter((function(t){return-1!==e[t].entities.findIndex((function(e){return e.hp>0}))}));else if(void 0===i)n!==y&&-1===e[n].entities.findIndex((function(e){return e.hp>0}))&&(n=n===T?I:T);else{var r=e[n].entities.filter((function(e){return e.hp>0}));t===y&&0===r.length&&(r=e[n=n===T?I:T].entities.filter((function(e){return e.hp>0}))),i=r[Math.floor(Math.random()*r.length)].index}return{group:n,index:i}},et=function(e,t,n){return void 0===n||Array.isArray(t)?Array.isArray(t)?"50%":String((Number(e[t].entities[0].leftPosition.replace("%",""))+Number(e[t].entities[e[t].entities.length-1].leftPosition.replace("%","")))/2)+"%":e[t].entities[n].leftPosition};function tt(e){return new Promise((function(t){return setTimeout(t,e)}))}var nt,it,rt,at,ct,ot,st,ut,bt,lt,dt,jt,pt,Ot,ft,xt,ht,gt,mt,Et,vt,yt,Tt,It,At,wt,kt,Nt,St,Mt,_t,Rt,Pt,Gt,Lt,Ht,Ct,Ut,Dt,Yt,qt,Ft,Bt,zt,Wt,Xt,Qt,Kt=function(){return function(){var e=Object(Ke.a)(Qe.a.mark((function e(t){return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tt(3e3);case 2:t(He(m));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Zt=function(e,t){return function(){var n=Object(Ke.a)(Qe.a.mark((function n(i,r){var a,c,o,s,u,b,l,d,p,O,f,x,h,g,m,v,T;return Qe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=r(),c=a.groups,o=e.group,s=e.index,u=c[o].entities[s],b=u.equipment,l=b.leftHand,d=b.rightHand,p=t.group,O=t.index,f=$e(c,o,p,O),x=f.group,h=f.index,g=l&&"twoHanded"in l&&l.twoHanded||l&&"attackType"in l?l.attackType:d&&"attackType"in d?d.attackType:D,m=et(c,x,h),i(qe(e,{type:g,left:m})),i(qe(f,{type:F,left:x===y&&void 0!==h?u.leftPosition:void 0})),n.next=13,tt(j[g]);case 13:if(i(qe(e,U)),v=Math.floor(5*Math.random()),T=!1,Math.random()>.85&&(T=!0),!(v>0)){n.next=29;break}return T&&i(De({target:{group:y},message:"terrific blow!!!"})),o===y&&i(De({target:f,message:v})),i(qe(f,{type:B,left:f.group===y&&void 0!==h?u.leftPosition:void 0})),n.next=23,tt(j[B]);case 23:o===y&&i(De({target:f,message:""})),i(Fe(f,T?2*-v:-v)),T&&i(De({target:{group:y},message:""})),i(qe(f,{type:U,left:-1})),n.next=34;break;case 29:return o===y&&i(De({target:f,message:"miss"})),n.next=32,tt(1e3);case 32:o===y&&i(De({target:f,message:""})),i(qe(f,U));case 34:i(He(E));case 35:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},Vt=function(e,t,n){return function(){var i=Object(Ke.a)(Qe.a.mark((function i(r,a){var c,o,s,u,b,l,d,p,O,f,x,h,g,m,v,T,I,A,w;return Qe.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return c=a(),o=c.groups,s=e.group,u=e.index,b=o[s].entities[u],l=b.techniques,d=l[n],O=(p=d||{}).name,f=p.effect,x=p.power,h=p.tp,g=t.group,m=t.index,v=f===oe?$e(o,s,g,m):t,T=v.group,I=v.index,A=et(o,T,I),w=s===T&&u===I,r(qe(e,{type:q,left:s===y&&T!==y?A:void 0})),w||r(qe(v,{type:F,left:s!==y&&void 0!==I?b.leftPosition:void 0})),i.next=15,tt(j[q]);case 15:if(!(h>b.tp)){i.next=20;break}return r(qe(e,U)),r(qe(v,U)),r(He(E)),i.abrupt("return");case 20:return r(Be(e,-h)),r(qe(e,w?{type:F,left:-1}:{type:U,left:-1})),r(De({target:{group:y},message:O})),i.next=25,tt(500);case 25:i.t0=f,i.next=i.t0===oe?28:i.t0===se?34:i.t0===ue?39:i.t0===be?40:i.t0===le?41:42;break;case 28:return T!==y&&r(De({target:v,message:x})),r(qe(v,{type:B,left:-1})),i.next=32,tt(j[B]);case 32:return r(Fe(v,-x)),i.abrupt("break",42);case 34:return T!==y&&r(De({target:v,message:x})),i.next=37,tt(1e3);case 37:return r(Fe(v,x)),i.abrupt("break",42);case 39:case 40:case 41:return i.abrupt("break",42);case 42:r(De({target:{group:y},message:""})),T!==y&&r(De({target:v,message:""})),r(qe(v,{type:U,left:-1})),r(He(E));case 46:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}()},Jt=function(e,t,n){return function(){var i=Object(Ke.a)(Qe.a.mark((function i(r,a){var c,o,s,u,b,l,d,p,O,f,x,h,g,m,v,T;return Qe.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return c=a(),o=c.groups,s=e.group,u=e.index,b=o[s].entities[u],l=b.inventory,d=t.group,p=t.index,O=et(o,d,p),f=s===d&&u===p,x=l[n],g=(h=x||{}).name,m=h.itemEffect,v=h.itemPower,T=h.consumable,r(qe(e,{type:q,left:s===y&&d!==y?O:void 0})),f||r(qe(t,{type:F,left:s!==y&&void 0!==p?b.leftPosition:void 0})),i.next=13,tt(j[q]);case 13:return T&&r(ze(e,n)),r(qe(e,f?{type:F,left:-1}:{type:U,left:-1})),r(De({target:{group:y},message:g})),i.next=18,tt(500);case 18:i.t0=m,i.next=i.t0===oe?21:i.t0===se?27:i.t0===ue?32:i.t0===be?33:i.t0===le?34:35;break;case 21:return d!==y&&r(De({target:t,message:v})),r(qe(t,{type:B,left:-1})),i.next=25,tt(j[B]);case 25:return r(Fe(t,-v)),i.abrupt("break",35);case 27:return d!==y&&r(De({target:t,message:v})),i.next=30,tt(1e3);case 30:return r(Fe(t,v)),i.abrupt("break",35);case 32:case 33:case 34:return i.abrupt("break",35);case 35:r(De({target:{group:y},message:""})),d!==y&&r(De({target:t,message:""})),r(qe(t,{type:U,left:-1})),r(He(E));case 39:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}()},$t=function(){return function(){var e=Object(Ke.a)(Qe.a.mark((function e(t,n){var i,r,a,c,o,s,u,b,d,p,O,f,x,h,g,E,v,A,w,k,N,S,R,P,G,L,H,C,D;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=n(),r=i.groups,a=r[y],c=r[T],o=r[I],s=0,u=0,b=0,d=Object(We.a)(a.entities.entries()),e.prev=5,d.s();case 7:if((p=d.n()).done){e.next=23;break}if(O=Object(l.a)(p.value,2),f=O[0],x=O[1],h=x.status,g=x.currentAnimation,!(x.hp>0&&h===M)){e.next=15;break}t(qe({group:y,index:f},{type:U})),s++,e.next=21;break;case 15:if(g.type===z||h===_){e.next=21;break}return t(qe({group:y,index:f},{type:z,left:-1})),e.next=19,tt(j[z]);case 19:t(Ye({group:y,index:f},_)),t(qe({group:y,index:f},U));case 21:e.next=7;break;case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(5),d.e(e.t0);case 28:return e.prev=28,d.f(),e.finish(28);case 31:E=Object(We.a)(c.entities.entries()),e.prev=32,E.s();case 34:if((v=E.n()).done){e.next=49;break}if(A=Object(l.a)(v.value,2),w=A[0],k=A[1],N=k.status,S=k.currentAnimation,!(k.hp>0&&N===M)){e.next=41;break}u++,e.next=47;break;case 41:if(S.type===z||N===_){e.next=47;break}return t(qe({group:T,index:w},z)),e.next=45,tt(j[z]);case 45:t(Ye({group:T,index:w},_)),t(qe({group:T,index:w},U));case 47:e.next=34;break;case 49:e.next=54;break;case 51:e.prev=51,e.t1=e.catch(32),E.e(e.t1);case 54:return e.prev=54,E.f(),e.finish(54);case 57:R=Object(We.a)(o.entities.entries()),e.prev=58,R.s();case 60:if((P=R.n()).done){e.next=75;break}if(G=Object(l.a)(P.value,2),L=G[0],H=G[1],C=H.status,D=H.currentAnimation,!(H.hp>0&&C===M)){e.next=67;break}b++,e.next=73;break;case 67:if(D.type===z||C===_){e.next=73;break}return t(qe({group:I,index:L},z)),e.next=71,tt(j[z]);case 71:t(Ye({group:I,index:L},_)),t(qe({group:I,index:L},U));case 73:e.next=60;break;case 75:e.next=80;break;case 77:e.prev=77,e.t2=e.catch(58),R.e(e.t2);case 80:return e.prev=80,R.f(),e.finish(80);case 83:return e.next=85,tt(500);case 85:s?u||b?(t(Le()),t(He(m))):t(Re()):t(Pe());case 86:case"end":return e.stop()}}),e,null,[[5,25,28,31],[32,51,54,57],[58,77,80,83]])})));return function(t,n){return e.apply(this,arguments)}}()},en=i.SET_PIXEL_MULTIPLIER,tn=i.START_NEW_GAME,nn=i.START_NEW_ROUND,rn=i.WIN_GAME,an=i.LOSE_GAME,cn=i.SET_QUEUE_INDEX,on=i.INCREMENT_QUEUE_INDEX,sn=i.SET_GAME_STATE,un=i.SET_PLAYER_INTERRUPT,bn=i.QUEUE_ACTION,ln=i.SET_GROUP_MESSAGE,dn=i.SET_ENTITY_STATUS,jn=i.SET_ENTITY_ANIMATION,pn=i.UPDATE_ENTITY_HP,On=i.UPDATE_ENTITY_TP,fn=i.REMOVE_ENTITY_ITEM,xn=function(e,t){var n=t.type,i=t.payload;switch(n){case en:return Object(je.a)(Object(je.a)({},e),{},{pixelMultiplier:i});case tn:return Object(je.a)(Object(je.a)({},e),i);case nn:return Object(je.a)(Object(je.a)({},e),{},{gameState:m,queueIndex:0,queue:i});case rn:return Object(je.a)(Object(je.a)({},e),{},{gameState:x,queueIndex:null});case an:return Object(je.a)(Object(je.a)({},e),{},{gameState:h,queueIndex:null});case cn:return Object(je.a)(Object(je.a)({},e),{},{queueIndex:i});case on:return Object(je.a)(Object(je.a)({},e),{},{queueIndex:null===e.queueIndex?0:e.queueIndex+1});case sn:return Object(je.a)(Object(je.a)({},e),{},{gameState:i});case un:return Object(je.a)(Object(je.a)({},e),{},{playerInterrupt:i});case ln:var r=i.target.group,a=i.message,c=Object(je.a)({},e.groups);return Array.isArray(r)?r.forEach((function(e){c=Object(je.a)(Object(je.a)({},c),{},Object(d.a)({},e,Object(je.a)(Object(je.a)({},c[e]),{},{message:a})))})):c=Object(je.a)(Object(je.a)({},c),{},Object(d.a)({},r,Object(je.a)(Object(je.a)({},c[r]),{},{message:a}))),Object(je.a)(Object(je.a)({},e),{},{groups:c});case dn:var o=i.target,s=o.group,u=o.index,b=i.status,l=Object(je.a)({},e.groups);if(Array.isArray(s))s.forEach((function(e){l[e]=Object(je.a)(Object(je.a)({},l[e]),{},{entities:l[e].entities.map((function(e){return Object(je.a)(Object(je.a)({},e),{},{status:b})}))})}));else if(void 0===u){var j=l[s].entities.map((function(e){return Object(je.a)(Object(je.a)({},e),{},{status:b})}));l=Object(je.a)(Object(je.a)({},l),{},Object(d.a)({},s,Object(je.a)(Object(je.a)({},l[s]),{},{entities:j})))}else{var p=Object(je.a)(Object(je.a)({},l[s].entities[u]),{},{status:b}),O=[].concat(Object(de.a)(l[s].entities.slice(0,u)),[p],Object(de.a)(l[s].entities.slice(u+1)));l=Object(je.a)(Object(je.a)({},l),{},Object(d.a)({},s,Object(je.a)(Object(je.a)({},l[s]),{},{entities:O})))}return Object(je.a)(Object(je.a)({},e),{},{groups:l});case jn:var f=i.target,g=f.group,E=f.index,v=i.animation,T=Object(je.a)({},e.groups),I="string"===typeof v?{type:v}:v;if(Array.isArray(g))g.forEach((function(e){T[e]=Object(je.a)(Object(je.a)({},T[e]),{},{entities:T[e].entities.map((function(e){return Object(je.a)(Object(je.a)({},e),{},{currentAnimation:-1===I.left?Object(je.a)(Object(je.a)({},e.currentAnimation),{},{type:I.type}):I})}))})}));else if(void 0===E){var A=T[g].entities.map((function(e){return Object(je.a)(Object(je.a)({},e),{},{currentAnimation:-1===I.left?Object(je.a)(Object(je.a)({},e.currentAnimation),{},{type:I.type}):I})}));T=Object(je.a)(Object(je.a)({},T),{},Object(d.a)({},g,Object(je.a)(Object(je.a)({},T[g]),{},{entities:A})))}else{var w=Object(je.a)(Object(je.a)({},T[g].entities[E]),{},{currentAnimation:-1===I.left?Object(je.a)(Object(je.a)({},T[g].entities[E].currentAnimation),{},{type:I.type}):I}),k=[].concat(Object(de.a)(T[g].entities.slice(0,E)),[w],Object(de.a)(T[g].entities.slice(E+1)));T=Object(je.a)(Object(je.a)({},T),{},Object(d.a)({},g,Object(je.a)(Object(je.a)({},T[g]),{},{entities:k})))}return Object(je.a)(Object(je.a)({},e),{},{groups:T});case pn:var N=i.target,S=N.group,M=N.index,_=i.offset,R=Object(je.a)({},e.groups);if(Array.isArray(S))S.forEach((function(e){R[e]=Object(je.a)(Object(je.a)({},R[e]),{},{entities:R[e].entities.map((function(e){return Object(je.a)(Object(je.a)({},e),{},{hp:Math.min(e.maxHp,e.hp+_)})}))})}));else if(void 0===M){var P=R[S].entities.map((function(e){return Object(je.a)(Object(je.a)({},e),{},{hp:Math.min(e.maxHp,e.hp+_)})}));R=Object(je.a)(Object(je.a)({},R),{},Object(d.a)({},S,Object(je.a)(Object(je.a)({},R[S]),{},{entities:P})))}else{var G=Object(je.a)(Object(je.a)({},R[S].entities[M]),{},{hp:Math.min(R[S].entities[M].maxHp,R[S].entities[M].hp+_)}),L=[].concat(Object(de.a)(R[S].entities.slice(0,M)),[G],Object(de.a)(R[S].entities.slice(M+1)));R=Object(je.a)(Object(je.a)({},R),{},Object(d.a)({},S,Object(je.a)(Object(je.a)({},R[S]),{},{entities:L})))}return Object(je.a)(Object(je.a)({},e),{},{groups:R});case On:var H=i.target,C=H.group,U=H.index,D=i.offset,Y=Object(je.a)({},e.groups);if(Array.isArray(C))C.forEach((function(e){Y[e]=Object(je.a)(Object(je.a)({},Y[e]),{},{entities:Y[e].entities.map((function(e){return Object(je.a)(Object(je.a)({},e),{},{tp:e.tp+D})}))})}));else if(void 0===U){var q=Y[C].entities.map((function(e){return Object(je.a)(Object(je.a)({},e),{},{tp:e.tp+D})}));Y=Object(je.a)(Object(je.a)({},Y),{},Object(d.a)({},C,Object(je.a)(Object(je.a)({},Y[C]),{},{entities:q})))}else{var F=Object(je.a)(Object(je.a)({},Y[C].entities[U]),{},{tp:Y[C].entities[U].tp+D}),B=[].concat(Object(de.a)(Y[C].entities.slice(0,U)),[F],Object(de.a)(Y[C].entities.slice(U+1)));Y=Object(je.a)(Object(je.a)({},Y),{},Object(d.a)({},C,Object(je.a)(Object(je.a)({},Y[C]),{},{entities:B})))}return Object(je.a)(Object(je.a)({},e),{},{groups:Y});case bn:var z=i.heroIndex,W=i.target,X=i.type,Q=i.techIndex,K=i.itemIndex,Z=Object(je.a)(Object(je.a)({},e.groups[y].entities[z]),{},{queuedAction:{type:X,target:W,techIndex:Q,itemIndex:K}}),V=[].concat(Object(de.a)(e.groups[y].entities.slice(0,z)),[Z],Object(de.a)(e.groups[y].entities.slice(z+1)));return Object(je.a)(Object(je.a)({},e),{},{groups:Object(je.a)(Object(je.a)({},e.groups),{},Object(d.a)({},y,Object(je.a)(Object(je.a)({},e.groups[y]),{},{entities:V})))});case fn:var J=i.target,$=i.itemIndex,ee=J.group,te=J.index;if(!ee||Array.isArray(ee)||void 0===te)return e;var ne=Object(de.a)(e.groups[ee].entities[te].inventory);ne.splice($,1);var ie=Object(je.a)(Object(je.a)({},e.groups[ee].entities[te]),{},{inventory:ne}),re=[].concat(Object(de.a)(e.groups[y].entities.slice(0,te)),[ie],Object(de.a)(e.groups[y].entities.slice(te+1)));return Object(je.a)(Object(je.a)({},e),{},{groups:Object(je.a)(Object(je.a)({},e.groups),{},Object(d.a)({},y,Object(je.a)(Object(je.a)({},e.groups[y]),{},{entities:re})))});default:return e}},hn=n(0),gn={pixelMultiplier:1,gameState:O,queue:[],queueIndex:null,playerInterrupt:!1,groups:(nt={},Object(d.a)(nt,y,{entities:[],message:""}),Object(d.a)(nt,T,{entities:[],message:""}),Object(d.a)(nt,I,{entities:[],message:""}),nt)},mn=Object(o.createContext)([gn,function(){return null}]),En=function(e){var t=e.children,n=Object(o.useReducer)(xn,gn),i=Object(l.a)(n,2),r=i[0],a=i[1],c=Object(o.useRef)(),s=Object(o.useCallback)((function(e){"function"===typeof e?e(s,(function(){return c.current})):a(e)}),[]);return c.current=r,Object(hn.jsx)(mn.Provider,{value:[r,s],children:t})},vn=n(3),yn=n(10),Tn=n(8),In=n(4),An=(n(39),In.b.div(it||(it=Object(vn.a)(["\n  margin: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n  width: 100%;\n  background: url('./assets/title.png');\n  background-position: center;\n  background-size: contain;\n  background-repeat: no-repeat;\n"])))),wn=Object(In.b)((function(e){return Object(hn.jsx)("div",Object(je.a)({},e))}))(rt||(rt=Object(vn.a)(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-end;\n  aspect-ratio: 4 / 3;\n  width: 133.33vmin;\n  overflow: hidden;\n  padding: 0.75em;\n"]))),kn=function(){return Object(hn.jsx)(An,{children:Object(hn.jsxs)(wn,{children:[Object(hn.jsx)(yn.b,{to:"new-game",children:"Start"}),Object(hn.jsx)(yn.b,{to:"about",children:"About"})]})})},Nn=n(52),Sn={KNIFE:{name:"KNIFE",attackPower:5,targetType:ne,attackType:"SLASH",equippableBy:[X,Q,Z]},STEEL_BAR:{name:"STEEL_BAR",attackPower:7,defensePower:2,targetType:ne,attackType:"SLASH",equippableBy:[K]},SHOTGUN:{name:"SHOTGUN",attackPower:20,targetType:ie,attackType:"SHOOT",equippableBy:[Q],twoHanded:!0}},Mn={CARBON_EMEL:{name:"CARBON_EMEL",defensePower:7,equippableBy:[Z]},CARBON_SHIELD:{name:"CARBON_SHIELD",defensePower:8,equippableBy:[X,Q]}},_n={HEADGEAR:{name:"HEADGEAR",defensePower:3,type:ce,equippableBy:[X,Q,Z]},RIBBON:{name:"RIBBON",defensePower:3,type:ce,equippableBy:[K]}},Rn={RES:{name:"RES",targetType:ne,targetAllies:!0,effect:se,power:20,tp:3},FOI:{name:"FOI",targetType:ne,effect:oe,power:14,tp:2},GIFOI:{name:"GIFOI",targetType:ie,effect:oe,power:20,tp:5},LIGHTNING:{name:"LIGHTNING",targetType:re,effect:oe,power:100,tp:5}},Pn={MONOMATE:{name:"MONOMATE",consumable:!0,itemTargetType:ne,itemTargetAllies:!0,itemEffect:se,itemPower:10}}.MONOMATE,Gn=Sn.KNIFE,Ln=Sn.STEEL_BAR,Hn=Sn.SHOTGUN,Cn=Mn.CARBON_EMEL,Un=Mn.CARBON_SHIELD,Dn=_n.HEADGEAR,Yn=_n.RIBBON,qn=Rn.RES,Fn=Rn.FOI,Bn=Rn.GIFOI,zn=(at={},Object(d.a)(at,X,{type:w,name:X,maxHp:15,hp:15,maxTp:5,tp:5,attack:1,defense:3,speed:2,inventory:[Pn,Pn],equipment:{leftHand:Un,rightHand:Gn,head:Dn},techniques:[qn,Fn,Bn],animations:Ze(!1),queuedAction:{type:P,target:{group:T,index:0}}}),Object(d.a)(at,Q,{type:w,name:Q,maxHp:20,hp:20,maxTp:0,tp:0,attack:1,defense:3,speed:2,inventory:[],equipment:{leftHand:Hn,rightHand:Hn},techniques:[],animations:Ze(!1),queuedAction:{type:P,target:{group:T}}}),Object(d.a)(at,K,{type:k,name:K,maxHp:15,hp:15,maxTp:15,tp:15,attack:1,defense:3,speed:3,inventory:[Pn,Pn,Pn],equipment:{leftHand:Ln,rightHand:Ln,head:Yn},techniques:[qn],animations:Ze(!1),queuedAction:{type:P,target:{group:T,index:0}}}),Object(d.a)(at,Z,{type:w,name:Z,maxHp:10,hp:10,maxTp:15,tp:15,attack:1,defense:3,speed:2,inventory:[Pn,Pn],equipment:{leftHand:Cn,rightHand:Gn,head:Dn},techniques:[qn],animations:Ze(!1),queuedAction:{type:P,target:{group:T,index:0}}}),at),Wn=Rn.RES,Xn=Rn.FOI,Qn=Rn.LIGHTNING,Kn=(ct={},Object(d.a)(ct,J,{type:N,name:J,maxHp:10,hp:10,maxTp:5,tp:5,attack:1,defense:3,speed:1,inventory:[],equipment:{},techniques:[],animations:Ze(!0),size:1,queuedAction:{type:P,target:{group:y,index:0}}}),Object(d.a)(ct,$,{type:N,name:$,maxHp:20,hp:20,maxTp:0,tp:0,attack:1,defense:3,speed:3,inventory:[],equipment:[],techniques:[],animations:Ze(!0),size:1,queuedAction:{type:P,target:{group:y,index:0}}}),Object(d.a)(ct,ee,{type:N,name:ee,maxHp:2560,hp:2560,maxTp:20,tp:20,attack:10,defense:10,speed:3,inventory:[],equipment:[],techniques:[Wn,Xn,Qn],animations:Ze(!0),size:4,height:120,width:320,queuedAction:{type:G,target:{group:y},techIndex:2}}),ct),Zn=Object(In.b)((function(e){return Object(hn.jsx)("div",Object(je.a)({},e))}))(ot||(ot=Object(vn.a)(["\n  background: #000080;\n  color: white;\n  position: relative;\n  padding: ","px\n    ","px\n    ","px\n    ","px;\n"])),(function(e){return 5*e.pixelMultiplier}),(function(e){return 8*e.pixelMultiplier}),(function(e){return 5*e.pixelMultiplier}),(function(e){return 8*e.pixelMultiplier})),Vn=In.b.div(st||(st=Object(vn.a)(["\n  position: absolute;\n  background-size: cover;\n  background-repeat: none;\n"]))),Jn=In.b.div(ut||(ut=Object(vn.a)(["\n  position: absolute;\n  height: 100%;\n  background-size: 100%;\n  background-repeat: repeat-y;\n"]))),$n=Object(In.b)((function(e){return Object(hn.jsx)("div",Object(je.a)({},e))}))(bt||(bt=Object(vn.a)(["\n  position: absolute;\n  height: ","px;\n  width: 100%;\n  background-size: ","px 100%;\n  background-repeat: repeat-x;\n"])),(function(e){return 3*e.pixelMultiplier}),(function(e){return 5*e.pixelMultiplier})),ei=function(e){var t=e.children,n=Object(o.useContext)(mn),i=Object(l.a)(n,1)[0].pixelMultiplier;return Object(hn.jsxs)(Zn,Object(je.a)(Object(je.a)({},e),{},{pixelMultiplier:i,children:[t,Object(hn.jsx)(Jn,{style:{top:0,left:0,width:5*i,backgroundImage:"url(./assets/left.png)"}}),Object(hn.jsx)(Jn,{style:{top:0,right:0,width:5*i,backgroundImage:"url(./assets/right.png)"}}),Object(hn.jsx)($n,{style:{top:0,left:0,backgroundImage:"url(./assets/top.png)"},pixelMultiplier:i}),Object(hn.jsx)($n,{style:{bottom:0,left:0,backgroundImage:"url(./assets/bottom.png)"},pixelMultiplier:i}),Object(hn.jsx)(Vn,{style:{top:0,left:0,width:5*i,height:3*i,backgroundImage:"url(./assets/top-left-corner.png)"}}),Object(hn.jsx)(Vn,{style:{top:0,right:0,width:5*i,height:3*i,backgroundImage:"url(./assets/top-right-corner.png)"}}),Object(hn.jsx)(Vn,{style:{bottom:0,left:0,width:5*i,height:3*i,backgroundImage:"url(./assets/bottom-left-corner.png)"}}),Object(hn.jsx)(Vn,{style:{bottom:0,right:0,width:5*i,height:3*i,backgroundImage:"url(./assets/bottom-right-corner.png)"}})]}))},ti=r.startNewGame,ni=In.b.button(lt||(lt=Object(vn.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1.1rem;\n  border: 1px solid;\n  border-radius: 8px;\n  margin: 0 auto;\n"]))),ii=function(){var e=Object(Tn.g)(),t=Object(o.useContext)(mn),n=Object(l.a)(t,2)[1],i=Object(o.useState)([X,Q,K,Z]),r=Object(l.a)(i,2),a=r[0],c=r[1],s=Object(o.useState)(J),u=Object(l.a)(s,2),b=u[0],j=u[1],p=Object(o.useState)(3),O=Object(l.a)(p,2),x=O[0],h=O[1],g=Object(o.useState)($),m=Object(l.a)(g,2),E=m[0],v=m[1],A=Object(o.useState)(1),w=Object(l.a)(A,2),k=w[0],N=w[1],S=x+k,_=b?x*Kn[b].size:0,R=E?k*Kn[E].size:0,P=4-_-R;return Object(hn.jsxs)(ei,{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"2rem",zIndex:10},children:[Object(hn.jsx)("h3",{children:"Let's go!"}),"--------------",Object(hn.jsx)("br",{}),Object(hn.jsx)("h4",{children:"Heroes: "}),Object(hn.jsxs)("div",{style:{display:"flex",justifyContent:"space-around",textAlign:"left"},children:[Object(hn.jsxs)("div",{children:[Object(hn.jsx)("label",{children:"Out:"}),Object(hn.jsx)("br",{}),Object(hn.jsx)("select",{onClick:function(e){var t=e.target.value,n=Object(de.a)(a);n.push(t),c(n)},size:4,style:{minWidth:100},children:Object.values(C).filter((function(e){return-1===a.indexOf(e)})).map((function(e){return Object(hn.jsx)("option",{value:e,children:e})}))})]}),Object(hn.jsxs)("div",{children:[Object(hn.jsx)("label",{children:"In:"}),Object(hn.jsx)("br",{}),Object(hn.jsx)("select",{onClick:function(e){var t=e.target.value,n=Object(de.a)(a);n.splice(a.indexOf(t),1),c(n)},size:4,style:{minWidth:100},children:a.map((function(e){return Object(hn.jsx)("option",{value:e,children:e})}))})]})]}),Object(hn.jsx)("br",{}),"--------------",Object(hn.jsx)("h4",{children:"Enemies: "}),Object(hn.jsxs)("select",{value:b,onChange:function(e){var t=e.target.value;return j("None"===t?void 0:t)},children:[Object(hn.jsx)("option",{children:"None"}),Object.values(W).filter((function(e){return e!==E})).map((function(e){return Object(hn.jsx)("option",{value:e,children:e},e)}))]}),Object(hn.jsx)("input",{type:"number",id:"leftEnemyCount",name:"leftEnemyCount",value:x,onChange:function(e){h(Number(e.target.value))},min:0,max:b?(4-R)/Kn[b].size:4,disabled:!b}),Object(hn.jsx)("br",{}),Object(hn.jsxs)("select",{value:E,onChange:function(e){var t=e.target.value;return v("None"===t?void 0:t)},disabled:!b||!x||!!_&&!R&&!P,children:[Object(hn.jsx)("option",{children:"None"}),Object.values(W).filter((function(e){return e!==b})).map((function(e){return Object(hn.jsx)("option",{value:e,children:e},e)}))]}),Object(hn.jsx)("input",{type:"number",id:"rightEnemyCount",name:"rightEnemyCount",value:k,onChange:function(e){N(Number(e.target.value))},min:0,max:E?(4-_)/Kn[E].size:4,disabled:!E}),Object(hn.jsx)("br",{}),"--------------",Object(hn.jsx)(ni,{onClick:function(){var t,i={gameState:f,queue:[],queueIndex:null,playerInterrupt:!1,groups:(t={},Object(d.a)(t,y,{message:"",entities:a.map((function(e,t){return Object(je.a)(Object(je.a)({},zn[e]),{},{id:Object(Nn.a)(),index:t,status:M,group:y,leftPosition:"".concat(0===t?40:1===t?60:2===t?20:80,"%"),currentAnimation:{type:U}})}))}),Object(d.a)(t,T,{type:b,message:"",entities:b&&x?Array.from(Array(x)).map((function(e,t){return Object(je.a)(Object(je.a)({},Kn[b]),{},{id:Object(Nn.a)(),index:t,group:T,status:M,leftPosition:"".concat((t+1)*(100/(x+k+1)),"%"),currentAnimation:{type:U}})})):[]}),Object(d.a)(t,I,{type:E,message:"",entities:E&&k?Array.from(Array(k)).map((function(e,t){return Object(je.a)(Object(je.a)({},Kn[E]),{},{id:Object(Nn.a)(),index:t,group:I,status:M,leftPosition:"".concat((x+t+1)*(100/(x+k+1)),"%"),currentAnimation:{type:U}})})):[]}),t)};n(ti(i)),e.push("/battle")},disabled:!a.length||S<=0,children:"Start"}),Object(hn.jsx)(yn.b,{to:"/",children:Object(hn.jsx)(ni,{children:"Cancel"})})]})},ri=In.b.div(dt||(dt=Object(vn.a)(["\n  width: 45%;\n  display: flex;\n  justify-content: flex-end;\n"]))),ai=Object(In.b)(ei)(jt||(jt=Object(vn.a)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-end;\n  flex: 0 0 70%;\n"]))),ci=Object(In.b)(ei)(pt||(pt=Object(vn.a)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-end;\n  flex: 0 0 30%;\n"]))),oi=function(e){var t=e.type,n=e.message;return Object(hn.jsxs)(ri,{children:[Object(hn.jsx)(ai,{children:t}),Object(hn.jsx)(ci,{children:n})]})},si=In.b.section(Ot||(Ot=Object(vn.a)(["\n  flex: 0 1 20%;\n  display: flex;\n  top: 0;\n  justify-content: space-between;\n"]))),ui=function(){var e=Object(o.useContext)(mn),t=Object(l.a)(e,1)[0].groups,n=t[T],i=t[I];return Object(hn.jsx)(si,{children:n.type!==ee&&Object(hn.jsxs)(hn.Fragment,{children:[Object(hn.jsx)(oi,{type:n.type,message:n.message}),Object(hn.jsx)(oi,{type:i.type,message:i.message})]})})},bi=function(e){return Object(In.c)(ft||(ft=Object(vn.a)(["\n  from {\n    mask-position: 0 0px;\n  }\n  to {\n    mask-position: 0 -","px;\n  }\n"])),1216*e)},li=Object(In.b)((function(e){return Object(hn.jsx)("div",Object(je.a)({},e))}))(xt||(xt=Object(vn.a)(["\n  width: ","px;\n  mask: ",";\n  mask-size: ","px auto;\n  mask-position: 0 -","px;\n  animation: "," 3s\n    steps(20) forwards 1 ",";\n  animation-name: ",";\n"])),(function(e){return e.width*e.pixelMultiplier}),(function(e){return e.dissolving?"url(./assets/gradient-mask.png)":"none"}),(function(e){return 128*e.pixelMultiplier}),(function(e){return 1216*e.pixelMultiplier}),(function(e){var t=e.pixelMultiplier;return bi(t)}),(function(e){return e.reverse?"":" reverse"}),(function(e){var t=e.dissolving,n=e.pixelMultiplier;return t?bi(n):"none"})),di=function(e){var t=e.dissolving,n=e.children,i=e.reverse,r=e.width,a=e.style,c=Object(o.useContext)(mn),s=Object(l.a)(c,1)[0].pixelMultiplier;return Object(hn.jsx)(li,{dissolving:t,reverse:i,width:r,style:a,pixelMultiplier:s,children:n})},ji=In.b.div(gt||(gt=Object(vn.a)(["\n  background: url('./assets/",".png');\n  background-size: ",";\n  background-repeat: no-repeat;\n  ","\n"])),(function(e){return e.spriteImg}),(function(e){var t=e.height,n=e.pixelMultiplier;return"auto ".concat(t*n,"px")}),(function(e){var t=e.width,n=e.frames,i=e.duration,r=e.pixelMultiplier;return Array.isArray(n)?1===n.length?Object(In.a)(Et||(Et=Object(vn.a)(["\n        background-position: ","px;\n      "])),-t*r*n[0]):Object(In.a)(vt||(vt=Object(vn.a)(["\n        animation: ","\n          ","s steps(1) infinite;\n      "])),function(e,t,n){return Object(In.c)(ht||(ht=Object(vn.a)(["\n  ","\n"])),t.map((function(i,r){return"\n    ".concat((r*(100/t.length)).toFixed(2),"% {\n      background-position: ").concat(-e*n*i,"px;\n    }\n  ")})))}(t,n,r),i/1e3):Object(In.a)(mt||(mt=Object(vn.a)(["\n        background-position: ","px;\n      "])),-t*r*n)})),pi=function(e){var t=Object(o.useContext)(mn),n=Object(l.a)(t,1)[0].pixelMultiplier;return Object(hn.jsx)(ji,Object(je.a)(Object(je.a)({},e),{},{pixelMultiplier:n}))},Oi=In.b.section(yt||(yt=Object(vn.a)(["\n  position: relative;\n  flex: 0 1 100%;\n"]))),fi=In.b.div(Tt||(Tt=Object(vn.a)(["\n  position: relative;\n  width: 100%;\n  height: 55%;\n"]))),xi=In.b.div(It||(It=Object(vn.a)([""]))),hi=Object(In.b)(ei)(At||(At=Object(vn.a)(["\n  position: absolute;\n  bottom: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  margin-bottom: 14px;\n"]))),gi=function(){var e=Object(o.useContext)(mn),t=Object(l.a)(e,1)[0],n=t.gameState,i=t.groups,r=t.pixelMultiplier,a=[].concat(Object(de.a)(i[T].entities),Object(de.a)(i[I].entities));return Object(hn.jsxs)(Oi,{children:[Object(hn.jsx)(fi,{children:a.map((function(e){var t=e.id,i=e.name,a=e.status,c=e.leftPosition,o=e.currentAnimation,s=e.animations,u=e.height,b=e.width,l=o.type,d=l?s[l]:{},j=d.frames,p=void 0===j?0:j,O=d.duration,x=void 0===O?0:O;return Object(hn.jsx)(di,{dissolving:n===f,reverse:!0,width:b||64,style:{position:"absolute",bottom:0,left:c,height:(u||64)*r,width:(b||64)*r,transform:"translateX(-50%)"},children:Object(hn.jsx)(pi,{height:u||64,width:b||64,spriteImg:String(i).toLowerCase(),frames:p,duration:x,style:{visibility:a===_?"hidden":void 0,height:"100%",width:"100%"}})},t)}))}),Object(hn.jsx)(xi,{children:i[y].entities.map((function(e,t){var i=e.id,a=e.name,c=e.status,o=e.leftPosition,s=e.currentAnimation,u=e.animations,b=s.type,l=s.left,d=b?u[b]:{},j=d.frames,p=void 0===j?0:j,O=d.duration,x=void 0===O?0:O,h=d.top,m=void 0===h?void 0:h,E=d.bottom,v=void 0===E?void 0:E;return Object(hn.jsx)("div",{style:{position:"absolute",top:m,bottom:"".concat(v||(2===t||3===t?-24:0),"px"),left:l||o,height:64*r,width:64*r,transform:"translateX(-50%)"},children:Object(hn.jsx)(pi,{height:64,width:64,spriteImg:a.toLowerCase(),frames:p,duration:x,style:{visibility:c===_||n!==f&&n!==g&&b===U?"hidden":void 0,height:"100%",width:"100%"}})},i)}))}),Boolean(i[y].message)&&Object(hn.jsx)(hi,{children:i[y].message})]})},mi=r.startNewGame,Ei=In.b.button(wt||(wt=Object(vn.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  font-size: 1.1rem;\n  border: 1px solid;\n  border-radius: 8px;\n  margin: 0 auto;\n"]))),vi=function(e){var t=e.handleClose,n=Object(o.useContext)(mn),i=Object(l.a)(n,2),r=i[0],a=i[1],c=r.gameState;return Object(hn.jsxs)(ei,{style:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"2rem",zIndex:10},children:[Object(hn.jsx)("div",{children:c===x?"You win! :)":c===h?"You lose! :(":"Had Enough?"}),"--------------",Object(hn.jsx)(Ei,{disabled:!0,onClick:function(){var e=Object(je.a)(Object(je.a)({},r),{},{gameState:f,queue:[],queueIndex:null,playerInterrupt:!1});a(mi(e)),t()},children:"Replay"}),Object(hn.jsx)(yn.b,{to:"/new-game",children:Object(hn.jsx)(Ei,{children:"New Game"})}),Object(hn.jsx)(yn.b,{to:"/",children:Object(hn.jsx)(Ei,{children:"Quit"})}),"--------------",Object(hn.jsx)(Ei,{onClick:t,children:"Continue"})]})},yi=function(e){var t=e.src,n=e.alt,i=e.width,r=e.height,a=Object(o.useContext)(mn),c=Object(l.a)(a,1)[0].pixelMultiplier;return Object(hn.jsx)("img",{src:t,alt:n||"",style:{width:i*c,height:r*c}})},Ti=r.queueAction,Ii=Object(In.b)(ei)(kt||(kt=Object(vn.a)(["\n  display: flex;\n  justify-content: flex-start;\n  align-items: flex-end;\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translate(-50%, -100%);\n  width: 16%;\n  height: 50%;\n"]))),Ai=Object(In.b)(ei)(Nt||(Nt=Object(vn.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  position: absolute;\n  top: 0;\n  right: 58%;\n  transform: translateY(-100%);\n  width: 34%;\n  height: 73%;\n  padding-top: 1em;\n"]))),wi=Object(In.b)((function(e){return Object(hn.jsx)("button",Object(je.a)({},e))}))(St||(St=Object(vn.a)(["\n  width: 100%;\n  padding: 0;\n  border: none;\n  outline: none;\n  background: none;\n  color: white;\n"]))),ki=Object(In.b)(ei)(Mt||(Mt=Object(vn.a)(["\n  position: absolute;\n  top: 0;\n  right: 58%;\n  transform: translateY(-55%);\n  width: 25%;\n  height: 160%;\n  padding-top: 1em;\n"]))),Ni=Object(In.b)(ei)(_t||(_t=Object(vn.a)(["\n  position: absolute;\n  top: 0;\n  right: 58%;\n  transform: translateY(-55%);\n  width: 34%;\n  height: 160%;\n  padding-top: 1em;\n"]))),Si=Object(In.b)((function(e){return Object(hn.jsx)(ei,Object(je.a)({},e))}))(Rt||(Rt=Object(vn.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n  position: absolute;\n  top: 0;\n  left: 58%;\n  transform: translateY(-100%);\n  width: 34%;\n  height: ",";\n  padding-top: 1em;\n"])),(function(e){var t=e.height;return"".concat(t)})),Mi=In.b.ul(Pt||(Pt=Object(vn.a)(["\n  list-style-type: none;\n  margin: 0;\n  padding: 0;\n"]))),_i=Object(In.b)((function(e){return Object(hn.jsx)("li",Object(je.a)({},e))}))(Gt||(Gt=Object(vn.a)(["\n  margin: 0 0 0.75em;\n\n  & button {\n    text-align: left;\n    &:before {\n      content: '';\n      display: inline-block;\n      width: ",";\n      height: ",";\n      margin-right: 0.25em;\n      margin-bottom: 0.1em;\n      background: orange;\n      background: url('./assets/button-light.png');\n      background-size: ",";\n      background-repeat: no-repeat;\n      background-position: ",";\n  }\n"])),(function(e){var t=e.pixelMultiplier;return"".concat(14*t,"px")}),(function(e){var t=e.pixelMultiplier;return"".concat(8*t,"px")}),(function(e){var t=e.pixelMultiplier;return"auto ".concat(8*t,"px")}),(function(e){var t=e.active,n=e.pixelMultiplier;return"".concat(t?-14*n:0,"px")})),Ri=function(e){var t,n=e.activeHero,i=e.handleClose,r=Object(o.useContext)(mn),a=Object(l.a)(r,2),c=a[0],s=a[1],u=c.groups,b=u[y],d=u[T],j=u[I],p=c.pixelMultiplier,O=Object(o.useState)(),f=Object(l.a)(O,2),x=f[0],h=f[1],g=Object(o.useState)(),m=Object(l.a)(g,2),E=m[0],v=m[1],A=Object(o.useState)(),w=Object(l.a)(A,2),k=w[0],N=w[1],S=n.name,M=n.index,_=n.equipment,R=_.leftHand,C=_.rightHand,U=n.inventory,D=n.techniques,Y=R&&"twoHanded"in R&&R.twoHanded||R&&"targetType"in R?R.targetType:C&&"targetType"in C?C.targetType:void 0,q=void 0!==k?D[k]:void 0,F=void 0!==E?U[E]:void 0,B=x===P?Y:x===G?null===q||void 0===q?void 0:q.targetType:x===L?null===F||void 0===F?void 0:F.itemTargetType:void 0,z=x===G?null===q||void 0===q?void 0:q.targetAllies:x===L?null===F||void 0===F?void 0:F.itemTargetAllies:void 0;return Object(o.useEffect)((function(){h(void 0),N(void 0),v(void 0)}),[n]),Object(o.useEffect)((function(){var e=function(e){"Escape"===e.key&&(void 0!==k?N(void 0):void 0!==E?v(void 0):void 0!==x?h(void 0):i())};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[k,E,x,i]),Object(o.useEffect)((function(){var e,t;if(x&&B&&(B===re||x===P&&!(null===j||void 0===j||null===(e=j.entities)||void 0===e?void 0:e.length)||(x===G||x===L)&&(z&&B===ie||!z&&!(null===j||void 0===j||null===(t=j.entities)||void 0===t?void 0:t.length)))){var n,r={group:z?y:B===re&&(null===j||void 0===j||null===(n=j.entities)||void 0===n?void 0:n.length)?[T,I]:T,index:B===ne?0:void 0};s(Ti({heroIndex:M,target:r,type:x,techIndex:k,itemIndex:E})),i()}}),[M,x,B,z,j,i,s,E,k,U,D]),Object(hn.jsxs)(hn.Fragment,{children:[Object(hn.jsx)(Ii,{children:S}),Object(hn.jsxs)(Ai,{children:[Y&&Object(hn.jsx)(wi,{onClick:function(){h(P)},children:Object(hn.jsx)(yi,{src:"./assets/attack-icon.png",width:16,height:16,alt:"attack icon"})}),Object(hn.jsx)(wi,{onClick:function(){D.length&&h(G)},children:Object(hn.jsx)(yi,{src:"./assets/tech-icon.png",width:16,height:16,alt:"technique icon"})}),Object(hn.jsx)(wi,{onClick:function(){U.length&&h(L)},children:Object(hn.jsx)(yi,{src:"./assets/item-icon.png",width:16,height:16,alt:"item icon"})}),Object(hn.jsx)(wi,{onClick:function(){s(Ti({heroIndex:M,type:H})),i()},children:Object(hn.jsx)(yi,{src:"./assets/defend-icon.png",width:16,height:16,alt:"defend icon"})})]}),x===G&&Object(hn.jsx)(ki,{children:Object(hn.jsx)(Mi,{children:D.map((function(e,t){return Object(hn.jsx)(_i,{pixelMultiplier:p,active:k===t,children:Object(hn.jsx)(wi,{onClick:function(){N(t)},children:e.name})},t)}))})}),x===L&&Object(hn.jsx)(Ni,{children:Object(hn.jsx)(Mi,{children:U.map((function(e,t){return Object(hn.jsx)(_i,{pixelMultiplier:p,active:E===t,children:Object(hn.jsx)(wi,{onClick:function(){v(t)},children:e.name},t)},t)}))})}),!x||B!==ne&&B!==ie||z||!(null===j||void 0===j||null===(t=j.entities)||void 0===t?void 0:t.length)?x&&B===ne&&z?Object(hn.jsx)(Si,{height:"133%",children:Object(hn.jsx)(Mi,{children:b.entities.map((function(e,t){return Object(hn.jsx)(_i,{pixelMultiplier:p,children:Object(hn.jsx)(wi,{onClick:function(){s(Ti({heroIndex:M,target:{group:y,index:t},type:x,techIndex:k,itemIndex:E})),i()},children:e.name})})}))})}):null:Object(hn.jsx)(Si,{height:"76%",children:Object(hn.jsxs)(Mi,{children:[Object(hn.jsx)(_i,{pixelMultiplier:p,children:Object(hn.jsx)(wi,{onClick:function(){s(Ti({heroIndex:M,target:{group:T,index:0},type:x,techIndex:k,itemIndex:E})),i()},children:null===d||void 0===d?void 0:d.type})}),Boolean(j.entities)&&Object(hn.jsx)(_i,{pixelMultiplier:p,children:Object(hn.jsx)(wi,{onClick:function(){s(Ti({heroIndex:M,target:{group:I,index:0},type:x,techIndex:k,itemIndex:E})),i()},children:null===j||void 0===j?void 0:j.type})})]})})]})},Pi=Object(In.b)(ei)(Lt||(Lt=Object(vn.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  flex: 0 1 auto;\n  width: 21%;\n"]))),Gi=Object(In.b)((function(e){return Object(hn.jsx)("button",Object(je.a)({},e))}))(Ht||(Ht=Object(vn.a)(["\n  background: none;\n  width: 100%;\n  height: 100%;\n  border: none;\n  color: inherit;\n  text-align: left;\n"]))),Li=function(e){var t=e.hero,n=e.index,i=e.handleSelect,r=t||{},a=r.hp,c=r.tp,o=r.name,s=r.queuedAction;return Object(hn.jsx)(Pi,{style:{order:0===n?1:1===n?2:2===n?0:3},children:Boolean(t)?Object(hn.jsxs)(Gi,{onClick:function(){"function"===typeof i&&i(n)},children:[Object(hn.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(hn.jsx)("div",{children:a<=0?Object(hn.jsx)(yi,{src:"./assets/gravestone.png",width:16,height:16,alt:"grave icon"}):Object(hn.jsxs)(hn.Fragment,{children:["HP",Object(hn.jsx)("br",{}),"TP"]})}),Object(hn.jsxs)("div",{children:[a>0?a:0,Object(hn.jsx)("br",{}),c]})]}),Object(hn.jsxs)("div",{style:{display:"flex",alignItems:"flex-end"},children:[Object(hn.jsx)(yi,{src:"./assets/".concat(String(s.type).toLowerCase(),"-icon.png"),width:16,height:16,alt:"action icon"}),o]})]}):Object(hn.jsx)(yi,{src:"./assets/blank-hero-icon.png",width:32,height:32,alt:"blank hero icon"})})},Hi=r.startNewRound,Ci=r.setPlayerInterrupt,Ui=In.b.section(Ct||(Ct=Object(vn.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  flex: 0 0 22%;\n  height: 22%;\n"]))),Di=Object(In.b)(ei)(Ut||(Ut=Object(vn.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  width: 16%;\n  order: 1;\n"]))),Yi=In.b.button(Dt||(Dt=Object(vn.a)(["\n  background: none;\n  border: none;\n  outline: none;\n  padding: 0;\n  color: white;\n"]))),qi=function(){var e=Object(o.useContext)(mn),t=Object(l.a)(e,2),n=t[0],i=t[1],r=n.gameState,a=n.queueIndex,c=n.playerInterrupt,s=n.groups,u=n.pixelMultiplier,b=Object(o.useState)(),d=Object(l.a)(b,2),j=d[0],p=d[1],v=Object(o.useState)(!1),A=Object(l.a)(v,2),w=A[0],k=A[1],N=function(e){p(j===e?void 0:e)};return Object(hn.jsxs)(Ui,{children:[Array.from(Array(4)).map((function(e,t){var n=s[y].entities[t];return Object(hn.jsx)(Li,{hero:n,index:t,handleSelect:r===O||r===g?N:void 0},(null===n||void 0===n?void 0:n.name)||"blank-hero-".concat(t))})),void 0!==j&&Object(hn.jsx)(Ri,{activeHero:s[y].entities[j],handleClose:function(){p(void 0)}}),Object(hn.jsxs)(Di,{children:[Object(hn.jsxs)(Yi,{disabled:void 0!==j||null!==a||r===O||r===f||r===x||r===h,onClick:function(){var e=Je([].concat(Object(de.a)(s[y].entities),Object(de.a)(s[T].entities),Object(de.a)(s[I].entities)));i(Hi(e))},children:[Object(hn.jsx)("div",{style:{height:8*u,width:14*u,margin:"0 auto"},children:Object(hn.jsx)(pi,{height:8,width:14,spriteImg:"button-light",frames:null!==a||r===x||r===h?[1]:[0],style:{height:"100%",width:"100%"}})}),Object(hn.jsx)("div",{children:"FGHT"})]}),Object(hn.jsxs)(Yi,{disabled:c||null===a||r!==m&&r!==E,onClick:function(){i(Ci(!0))},children:[Object(hn.jsx)("div",{style:{height:8*u,width:14*u,margin:"0 auto"},children:Object(hn.jsx)(pi,{height:8,width:14,spriteImg:"button-light",frames:c||null===a||r!==m&&r!==E?[1]:[0],style:{height:"100%",width:"100%"}})}),Object(hn.jsx)("div",{children:"STGY"})]}),Object(hn.jsx)("button",{onClick:function(){i(Ci(!0)),k(!0)},children:"Exit"})]}),(w||r===O||r===x||r===h)&&Object(hn.jsx)(vi,{handleClose:function(){k(!1)}})]})},Fi=In.b.div(Yt||(Yt=Object(vn.a)(["\n  margin: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 100%;\n"]))),Bi=Object(In.c)(qt||(qt=Object(vn.a)(["\n  0% {\n    background-position: 0%;\n  }\n  50% {\n    background-position: -100%;\n  }\n"]))),zi=Object(In.b)((function(e){return Object(hn.jsx)("div",Object(je.a)({},e))}))(Ft||(Ft=Object(vn.a)(["\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: stretch;\n  aspect-ratio: 4 / 3;\n  width: 133.33vmin;\n  overflow: hidden;\n  outline: 4px solid #000088;\n  background: url('/assets/battle-bg.png');\n  background-size: auto 100%;\n  ","\n"])),(function(e){if(e.bgFlash)return Object(In.a)(Bt||(Bt=Object(vn.a)(["\n        animation: "," 0.35s steps(1) infinite;\n      "])),Bi)})),Wi=function(){var e=Object(o.useContext)(mn),t=Object(l.a)(e,1)[0].groups[y].entities,n=Object(o.useState)(!1),i=Object(l.a)(n,2),r=i[0],a=i[1];return Object(o.useEffect)((function(){t.find((function(e){return e.currentAnimation.type===B}))?a(!0):a(!1)}),[t]),Object(hn.jsx)(Fi,{children:Object(hn.jsxs)(zi,{bgFlash:r,children:[Object(hn.jsx)(ui,{}),Object(hn.jsx)(gi,{}),Object(hn.jsx)(qi,{})]})})},Xi=r.startNewRound,Qi=r.setQueueIndex,Ki=r.incrementQueueIndex,Zi=r.setGameState,Vi=r.setPlayerInterrupt,Ji=a.postExecutionThunk,$i=a.attackThunk,er=a.newGameThunk,tr=function(){var e=Object(Tn.g)(),t=Object(o.useContext)(mn),n=Object(l.a)(t,2),i=n[0],r=n[1],a=i.gameState,c=i.groups,s=i.queue,u=i.queueIndex,b=i.playerInterrupt,d=Object(o.useRef)(u),j=Object(o.useRef)(a);return Object(o.useEffect)((function(){a===O&&e.push("/")}),[a,e]),Object(o.useEffect)((function(){if(null!==u&&u!==d.current)if(d.current=u,s[u]){var e=s[u],t=e.type,n=e.actor,i=e.target,a=e.techIndex,o=e.itemIndex,l=n.group,j=n.index,p=c[l].entities[j];if(p.hp<=0||p.status!==M)return void r(Ki());switch(t){case P:r($i(n,i));break;case G:void 0!==a&&r(Vt(n,i,a));break;case L:void 0!==o&&r(Jt(n,i,o));break;default:r(Ki())}}else b?(r(Zi(g)),r(Qi(null)),r(Vi(!1))):r(Qi(0))}),[u,a,s,c,b,r]),Object(o.useEffect)((function(){if(a===f)r(er());else if(a!==j.current){if(j.current===f)if(Math.random()>.9){var e=Je([].concat(Object(de.a)(c[T].entities),Object(de.a)(c[I].entities)));r(Xi(e)),r(Vi(!0))}else r(Zi(g));else a===E&&r(Ji());j.current=a}}),[a,c,r]),Object(hn.jsx)(Wi,{})},nr=In.b.div(zt||(zt=Object(vn.a)(["\n  max-width: 800px;\n  margin: 0 auto;\n"]))),ir=In.b.a(Wt||(Wt=Object(vn.a)(["\n  margin: 0 1em;\n"]))),rr=function(){return Object(hn.jsxs)("div",{children:[Object(hn.jsxs)("h1",{children:["Phantasy Star 2",Object(hn.jsx)("br",{}),"Battle Simulator"]}),Object(hn.jsxs)(nr,{children:[Object(hn.jsxs)("p",{children:["Homage to the fighting system from the 1989 RPG classic"," ",Object(hn.jsx)("i",{children:"Phantasy Star 2"})," for the Sega Genesis console."]}),Object(hn.jsxs)("div",{style:{display:"flex",margin:"0 0 1em"},children:[Object(hn.jsxs)(ei,{style:{width:"50%"},children:[Object(hn.jsx)("h3",{children:"Will Ashe"}),Object(hn.jsx)(ir,{href:"",children:Object(hn.jsx)(yi,{src:"./assets/website-icon.png",width:16,height:16,alt:"website icon"})}),Object(hn.jsx)(ir,{href:"",children:Object(hn.jsx)(yi,{src:"./assets/github-icon.png",width:16,height:16,alt:"GitHub icon"})}),Object(hn.jsx)(ir,{href:"",children:Object(hn.jsx)(yi,{src:"./assets/linkedin-icon.png",width:16,height:16,alt:"LinkedIn icon"})})]}),Object(hn.jsxs)(ei,{style:{width:"50%"},children:[Object(hn.jsx)("h3",{children:"Tomas Ortiz"}),Object(hn.jsx)(ir,{href:"",children:Object(hn.jsx)(yi,{src:"./assets/website-icon.png",width:16,height:16,alt:"website icon"})}),Object(hn.jsx)(ir,{href:"",children:Object(hn.jsx)(yi,{src:"./assets/github-icon.png",width:16,height:16,alt:"GitHub icon"})}),Object(hn.jsx)(ir,{href:"",children:Object(hn.jsx)(yi,{src:"./assets/linkedin-icon.png",width:16,height:16,alt:"LinkedIn icon"})})]})]}),Object(hn.jsx)(yn.b,{to:"/",children:"Home"})]})]})},ar=r.setPixelMultiplier,cr=Object(In.b)((function(e){return Object(hn.jsx)("main",Object(je.a)({},e))}))(Qt||(Qt=Object(vn.a)(["\n  color: #e5e4e2;\n  text-align: center;\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  display: flex;\n  flex-direction: column;\n  background: url('./assets/star-bg.png');\n  background-size: ","px\n    ","px;\n  background-repeat: repeat;\n  font-size: ","px;\n  animation: "," 60s\n    linear infinite;\n  animation-fill-mode: forwards;\n"])),(function(e){return 320*e.pixelMultiplier}),(function(e){return 240*e.pixelMultiplier}),(function(e){return 8*e.pixelMultiplier}),(function(e){return function(e){return Object(In.c)(Xt||(Xt=Object(vn.a)(["\n  0% {\n    background-position: 0px;\n  }\n  100% {\n    background-position: ","px;\n  }\n"])),320*e)}(e.pixelMultiplier)}));function or(){var e=Object(o.useContext)(mn),t=Object(l.a)(e,2),n=t[0],i=t[1],r=n.pixelMultiplier;return Object(o.useEffect)((function(){var e=function(){var e=window.innerWidth/window.innerHeight>=4/3?window.innerHeight/240:window.innerWidth/320;i(ar(e))};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[i]),Object(hn.jsx)(yn.a,{basename:"/rpg-battle",children:Object(hn.jsx)(cr,{pixelMultiplier:r,children:Object(hn.jsxs)(Tn.d,{children:[Object(hn.jsx)(Tn.b,{exact:!0,path:"/",component:kn}),Object(hn.jsx)(Tn.b,{exact:!0,path:"/new-game",component:ii}),Object(hn.jsx)(Tn.b,{exact:!0,path:"/battle",component:tr}),Object(hn.jsx)(Tn.b,{exact:!0,path:"/about",component:rr}),Object(hn.jsx)(Tn.a,{to:"/"})]})})})}var sr=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,53)).then((function(t){var n=t.getCLS,i=t.getFID,r=t.getFCP,a=t.getLCP,c=t.getTTFB;n(e),i(e),r(e),a(e),c(e)}))};b.a.render(Object(hn.jsx)(s.a.StrictMode,{children:Object(hn.jsx)(En,{children:Object(hn.jsx)(or,{})})}),document.getElementById("root")),sr()}},[[50,1,2]]]);
//# sourceMappingURL=main.e416e19c.chunk.js.map